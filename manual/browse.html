<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Processing raw data &mdash; MNE 0.9.dev0 documentation</title>
    
    <link rel="stylesheet" href="../_static/navy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="MNE 0.9.dev0 documentation" href="../index.html" />
    <link rel="up" title="Manual" href="../manual.html" />
    <link rel="next" title="The forward solution" href="forward.html" />
    <link rel="prev" title="The Cookbook" href="cookbook.html" />

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="http://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>


  </head>
  <body>

<div style="background-color: red; color: white; font-weight:bold; text-align: center; padding: 10px; min-width: 910px">
This documentation is for the development version (0.9.dev0) - <a href="http://martinos.org/mne/stable">Stable version</a>
</div>

<div style="background-color: white; text-align: left; padding: 10px 7px 15px 15px; min-width: 910px">
<div style="float: left">
<a href="../index.html"><img src="../_static/mne_logo.png" border="0" alt="py4sci"/></a>
</div>

<div style="float: right">
<a href="../index.html"><img src="../_static/institutions.png" border="0" alt="py4sci"/></a>
</div>
<br style="clear:both"/>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="forward.html" title="The forward solution"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cookbook.html" title="The Cookbook"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Home</a>&nbsp;|&nbsp;</li>
        <li><a href="../manual.html">Manual</a>&nbsp;|&nbsp;</li>
        <li><a href="../mne-python.html">Python</a>&nbsp;|&nbsp;</li>
        <li><a href="../cite.html">Cite MNE</a>&nbsp;|&nbsp;</li>
        <!-- <li><a href="../search.html">Search</a></li> -->

          <li><a href="../manual.html" accesskey="U">Manual</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../manual.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook.html">The Cookbook</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Processing raw data</a></li>
<li class="toctree-l2"><a class="reference internal" href="forward.html">The forward solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="mne.html">The current estimates</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyze.html">Interactive analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="morph.html">Morphing and averaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert.html">Data conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="matlab.html">The Matlab toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Miscellaneous utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampledata.html">The sample data set</a></li>
<li class="toctree-l2"><a class="reference internal" href="reading.html">Related publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppA.html">Creating the BEM meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppB.html">Setup at the Martinos Center</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppInstall.html">Installation and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppReleaseNotes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppEULA.html">Licence agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command_line_tutorial.html">Getting started with MNE command line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mne-python.html">MNE with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mne-cpp.html">MNE with CPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cite.html">Cite MNE and MNE-Python</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Versions</h3>
<ul class="current">
    <li class="toctree-l1"><a href=http://martinos.org/mne/stable>Stable</a></li>
    <li class="toctree-l1"><a href=http://martinos.org/mne/dev>Development</a></li>
</ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="processing-raw-data">
<span id="ch-browse"></span><h1>Processing raw data<a class="headerlink" href="#processing-raw-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The raw data processor mne_browse_raw is
designed for simple raw data viewing and processing operations. In
addition, the program is capable of off-line averaging and estimation
of covariance matrices. mne_browse_raw can
be also used to view averaged data in the topographical layout.
Finally, mne_browse_raw can communicate
with mne_analyze described in <a class="reference internal" href="analyze.html#ch-interactive-analysis"><em>Interactive analysis</em></a> to
calculate current estimates from raw data interactively.</p>
<p>mne_browse_raw has also
an alias, mne_process_raw . If mne_process_raw is
invoked, no user interface appears. Instead, command line options
are used to specify the filtering parameters as well as averaging
and covariance-matrix estimation command files for batch processing. This
chapter discusses both mne_browse_raw and mne_process_raw .</p>
</div>
<div class="section" id="command-line-options">
<span id="cachcfeg"></span><h2>Command-line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>This section first describes the options common to mne_browse_raw and mne_process_raw .
Thereafter, options unique to the interactive (mne_browse_raw)
and batch (mne_process_raw) modes are
listed.</p>
<div class="section" id="common-options">
<span id="babbgjea"></span><h3>Common options<a class="headerlink" href="#common-options" title="Permalink to this headline">¶</a></h3>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;cd &lt;*dir*&gt;</strong></p>
<blockquote>
<div>Change to this directory before starting.</div></blockquote>
<p><strong>&#8212;raw &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the raw data file to be opened. This option is required
for batch version, mne_process_raw. If
a raw data file is not specified for the interactive version, mne_browse_raw ,
and empty interactive browser will open.</div></blockquote>
<p><strong>&#8212;grad &lt;*number*&gt;</strong></p>
<blockquote>
<div>Apply software gradient compensation of the given order to the data loaded
with the <tt class="docutils literal"><span class="pre">--raw</span></tt> option. This option is effective only
for data acquired with the CTF and 4D Magnes MEG systems. If orders
different from zero are requested for Neuromag data, an error message appears
and data are not loaded. Any compensation already existing in the
file can be undone or changed to another order by using an appropriate <tt class="docutils literal"><span class="pre">--grad</span></tt> options.
Possible orders are 0 (No compensation), 1 - 3 (CTF data), and 101
(Magnes data). The same compensation will be applied to all data
files loaded by mne_process_raw . For mne_browse_raw ,
this applies only to the data file loaded by specifying the <tt class="docutils literal"><span class="pre">--raw</span></tt> option.
For interactive data loading, the software gradient compensation
is specified in the corresponding file selection dialog, see <a class="reference internal" href="#cacdchaj"><em>Open</em></a>.</div></blockquote>
<p><strong>&#8212;filtersize &lt;*size*&gt;</strong></p>
<blockquote>
<div>Adjust the length of the FFT to be applied in filtering. The number will
be rounded up to the next power of two. If the size is <img class="math" src="../_images/math/75e27f04188974063be3230dca208cd495b77ce1.png" alt="N"/>,
the corresponding length of time is <img class="math" src="../_images/math/b7cbbe20ab2ccdf614bada28d7cd0836cdb946c0.png" alt="N/f_s"/>,
where <img class="math" src="../_images/math/a2750eb24a00e1c35b2e560ee2981dbcb52d7b3c.png" alt="f_s"/> is the sampling frequency
of your data. The filtering procedure includes overlapping tapers
of length <img class="math" src="../_images/math/0feb52801a927a6eacffc3ee7bedea944bd8959b.png" alt="N/2"/> so that the total FFT
length will actually be <img class="math" src="../_images/math/fa6e4221bb72e2ef97c0ca409174b8d3367cfa36.png" alt="2N"/>. This
value cannot be changed after the program has been started.</div></blockquote>
<p><strong>&#8212;highpass &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>Highpass filter frequency limit. If this is too low with respect
to the selected FFT length and, the data will not be highpass filtered. It
is best to experiment with the interactive version to find the lowest applicable
filter for your data. This value can be adjusted in the interactive
version of the program. The default is 0, <em>i.e.</em>,
no highpass filter apart from that used during the acquisition will
be in effect.</div></blockquote>
<p><strong>&#8212;highpassw &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>The width of the transition band of the highpass filter. The default
is 6 frequency bins, where one bin is <img class="math" src="../_images/math/3391a720b343f0a22560fdde79f143c542225709.png" alt="f_s / (2N)"/>. This
value cannot be adjusted in the interactive version of the program.</div></blockquote>
<p><strong>&#8212;lowpass &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>Lowpass filter frequency limit. This value can be adjusted in the interactive
version of the program. The default is 40 Hz.</div></blockquote>
<p><strong>&#8212;lowpassw &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>The width of the transition band of the lowpass filter. This value
can be adjusted in the interactive version of the program. The default
is 5 Hz.</div></blockquote>
<p><strong>&#8212;eoghighpass &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>Highpass filter frequency limit for EOG. If this is too low with respect
to the selected FFT length and, the data will not be highpass filtered.
It is best to experiment with the interactive version to find the
lowest applicable filter for your data. This value can be adjusted in
the interactive version of the program. The default is 0, <em>i.e.</em>,
no highpass filter apart from that used during the acquisition will
be in effect.</div></blockquote>
<p><strong>&#8212;eoghighpassw &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>The width of the transition band of the EOG highpass filter. The default
is 6 frequency bins, where one bin is <img class="math" src="../_images/math/3391a720b343f0a22560fdde79f143c542225709.png" alt="f_s / (2N)"/>.
This value cannot be adjusted in the interactive version of the
program.</div></blockquote>
<p><strong>&#8212;eoglowpass &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>Lowpass filter frequency limit for EOG. This value can be adjusted in
the interactive version of the program. The default is 40 Hz.</div></blockquote>
<p><strong>&#8212;eoglowpassw &lt;*value/Hz*&gt;</strong></p>
<blockquote>
<div>The width of the transition band of the EOG lowpass filter. This value
can be adjusted in the interactive version of the program. The default
is 5 Hz.</div></blockquote>
<p><strong>&#8212;filteroff</strong></p>
<blockquote>
<div>Do not filter the data. This initial value can be changed in the
interactive version of the program.</div></blockquote>
<p><strong>&#8212;digtrig &lt;*name*&gt;</strong></p>
<blockquote>
<div>Name of the composite digital trigger channel. The default value
is &#8216;STI 014&#8217;. Underscores in the channel name
will be replaced by spaces.</div></blockquote>
<p><strong>&#8212;digtrigmask &lt;*number*&gt;</strong></p>
<blockquote>
<div>Mask to be applied to the trigger channel values before considering them.
This option is useful if one wants to set some bits in a don&#8217;t care
state. For example, some finger response pads keep the trigger lines
high if not in use, <em>i.e.</em>, a finger is not in
place. Yet, it is convenient to keep these devices permanently connected
to the acquisition system. The number can be given in decimal or
hexadecimal format (beginning with 0x or 0X). For example, the value
255 (0xFF) means that only the lowest order byte (usually trigger
lines 1 - 8 or bits 0 - 7) will be considered.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Multiple raw data files can be specified for mne_process_raw .</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Strictly speaking, trigger mask value zero would    mean that all trigger inputs are ignored. However, for convenience,    setting the mask to zero or not setting it at all has the same effect    as 0xFFFFFFFF, <em>i.e.</em>, all bits set.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The digital trigger channel can also be set with    the MNE_TRIGGER_CH_NAME environment variable. Underscores in the variable    value will <em>not</em> be replaced with spaces by mne_browse_raw or mne_process_raw .    Using the <tt class="docutils literal"><span class="pre">--digtrig</span></tt> option supersedes the MNE_TRIGGER_CH_NAME    environment variable.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The digital trigger channel mask can also be    set with the MNE_TRIGGER_CH_MASK environment variable. Using the <tt class="docutils literal"><span class="pre">--digtrigmask</span></tt> option    supersedes the MNE_TRIGGER_CH_MASK environment variable.</p>
</div>
</div>
<div class="section" id="interactive-mode-options">
<span id="cacchaga"></span><h3>Interactive mode options<a class="headerlink" href="#interactive-mode-options" title="Permalink to this headline">¶</a></h3>
<p>These options apply to the interactive (mne_browse_raw)
version only.</p>
<p><strong>&#8212;allowmaxshield</strong></p>
<blockquote>
<div>Allow loading of unprocessed Elekta-Neuromag data with MaxShield
on. These kind of data should never be used for source localization
without further processing with Elekta-Neuromag software.</div></blockquote>
<p><strong>&#8212;deriv &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of a derivation file. This overrides the use
of a standard derivation file, see <a class="reference internal" href="#cacfhafh"><em>Load derivations</em></a>.</div></blockquote>
<p><strong>&#8212;sel &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the channel selection file to be used. This overrides
the use of the standard channel selection files, see <a class="reference internal" href="#caccjejd"><em>Selection</em></a>.</div></blockquote>
</div>
<div class="section" id="batch-mode-options">
<span id="cacfaaaj"></span><h3>Batch-mode options<a class="headerlink" href="#batch-mode-options" title="Permalink to this headline">¶</a></h3>
<p>These options apply to the batch-mode version, mne_process_raw only.</p>
<p><strong>&#8212;proj &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify the name of the file of the file containing a signal-space
projection (SSP) operator. If <tt class="docutils literal"><span class="pre">--proj</span></tt> options are present
the data file is not consulted for an SSP operator. The operator
corresponding to average EEG reference is always added if EEG data
are present.</div></blockquote>
<p><strong>&#8212;projon</strong></p>
<blockquote>
<div>Activate the projections loaded. One of the options <tt class="docutils literal"><span class="pre">--projon</span></tt> or <tt class="docutils literal"><span class="pre">--projoff</span></tt> must
be present on the mne_processs_raw command line.</div></blockquote>
<p><strong>&#8212;projoff</strong></p>
<blockquote>
<div>Deactivate the projections loaded. One of the options <tt class="docutils literal"><span class="pre">--projon</span></tt> or <tt class="docutils literal"><span class="pre">--projoff</span></tt> must
be present on the mne_processs_raw command line.</div></blockquote>
<p><strong>&#8212;makeproj</strong></p>
<blockquote>
<div>Estimate the noise subspace from the data and create a new signal-space
projection operator instead of using one attached to the data file
or those specified with the <tt class="docutils literal"><span class="pre">--proj</span></tt> option. The following
eight options define the parameters of the noise subspace estimation. More
information on the signal-space projection can be found in <a class="reference internal" href="#cacchabi"><em>The Signal-Space Projection (SSP) method</em></a>.</div></blockquote>
<p><strong>&#8212;projevent &lt;*no*&gt;</strong></p>
<blockquote>
<div>Specifies the events which identify the time points of interest
for projector calculation. When this option is present, <tt class="docutils literal"><span class="pre">--projtmin</span></tt> and <tt class="docutils literal"><span class="pre">--projtmax</span></tt> are
relative to the time point of the event rather than the whole raw
data file.</div></blockquote>
<p><strong>&#8212;projtmin &lt;*time/s*&gt;</strong></p>
<blockquote>
<div>Specify the beginning time for the calculation of the covariance matrix
which serves as the basis for the new SSP operator. This option
is required with <tt class="docutils literal"><span class="pre">--projevent</span></tt> and defaults to the beginning
of the raw data file otherwise. This option is effective only if <tt class="docutils literal"><span class="pre">--makeproj</span></tt> or <tt class="docutils literal"><span class="pre">--saveprojtag</span></tt> options
are present.</div></blockquote>
<p><strong>&#8212;projtmax &lt;*time/s*&gt;</strong></p>
<blockquote>
<div>Specify the ending time for the calculation of the covariance matrix which
serves as the basis for the new SSP operator. This option is required
with <tt class="docutils literal"><span class="pre">--projevent</span></tt> and defaults to the end of the raw data
file otherwise. This option is effective only if <tt class="docutils literal"><span class="pre">--makeproj</span></tt> or <tt class="docutils literal"><span class="pre">--saveprojtag</span></tt> options
are present.</div></blockquote>
<p><strong>&#8212;projngrad &lt;*number*&gt;</strong></p>
<blockquote>
<div>Number of SSP components to include for planar gradiometers (default
= 5). This value is system dependent. For example, in a well-shielded
quiet environment, no planar gradiometer projections are usually
needed.</div></blockquote>
<p><strong>&#8212;projnmag &lt;*number*&gt;</strong></p>
<blockquote>
<div>Number of SSP components to include for magnetometers / axial gradiometers
(default = 8). This value is system dependent. For example, in a
well-shielded quiet environment, 3 - 4 components are need
while in a noisy environment with light shielding even more than
8 components may be necessary.</div></blockquote>
<p><strong>&#8212;projgradrej &lt;*value/ fT/cm*&gt;</strong></p>
<blockquote>
<div>Rejection limit for planar gradiometers in the estimation of the covariance
matrix frfixom which the new SSP operator is derived. The default
value is 2000 fT/cm. Again, this value is system dependent.</div></blockquote>
<p><strong>&#8212;projmagrej &lt;*value/ fT*&gt;</strong></p>
<blockquote>
<div>Rejection limit for planar gradiometers in the estimation of the covariance
matrix from which the new SSP operator is derived. The default value
is 3000 fT. Again, this value is system dependent.</div></blockquote>
<p><strong>&#8212;saveprojtag &lt;*tag*&gt;</strong></p>
<blockquote>
<div>This option defines the names of files to hold the SSP operator.
If this option is present the <tt class="docutils literal"><span class="pre">--makeproj</span></tt> option is
implied. The SSP operator file name is formed by removing the trailing <tt class="docutils literal"><span class="pre">.fif</span></tt> or <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> from
the raw data file name by appending  &lt;<em>tag</em>&gt; .fif
to this stem. Recommended value for &lt;<em>tag</em>&gt; is <tt class="docutils literal"><span class="pre">-proj</span></tt> .</div></blockquote>
<p><strong>&#8212;saveprojaug</strong></p>
<blockquote>
<div>Specify this option if you want to use the projection operator file output
in the Elekta-Neuromag Signal processor (graph) software.</div></blockquote>
<p><strong>&#8212;eventsout &lt;*name*&gt;</strong></p>
<blockquote>
<div>List the digital trigger channel events to the specified file. By default,
only transitions from zero to a non-zero value are listed. If multiple
raw data files are specified, an equal number of <tt class="docutils literal"><span class="pre">--eventsout</span></tt> options
should be present. If the file name ends with .fif, the output will
be in fif format, otherwise a text event file will be output.</div></blockquote>
<p><strong>&#8212;allevents</strong></p>
<blockquote>
<div>List all transitions to file specified with the <tt class="docutils literal"><span class="pre">--eventsout</span></tt> option.</div></blockquote>
<p><strong>&#8212;events &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of a fif or text format event file (see <a class="reference internal" href="#cacbcegc"><em>Event files</em></a>) to be associated with a raw data file to be
processed. If multiple raw data files are specified, the number
of <tt class="docutils literal"><span class="pre">--events</span></tt> options can be smaller or equal to the
number of raw data files. If it is equal, the event filenames will
be associated with the raw data files in the order given. If it
is smaller, the remaining raw data files for which an event file
is not specified will <em>not</em> have an event file associated
with them. The event file format is recognized from the file name:
if it ends with <tt class="docutils literal"><span class="pre">.fif</span></tt> , the file is assumed to be in
fif format, otherwise a text file is expected.</div></blockquote>
<p><strong>&#8212;ave &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of an off-line averaging description file. For details
of the format of this file, please consult <a class="reference internal" href="#cacbbdgc"><em>Description files for off-line averaging</em></a>.
If multiple raw data files are specified, the number of <tt class="docutils literal"><span class="pre">--ave</span></tt> options
can be smaller or equal to the number of raw data files. If it is
equal, the averaging description file names will be associated with
the raw data files in the order given. If it is smaller, the last
description file will be used for the remaining raw data files.</div></blockquote>
<p><strong>&#8212;saveavetag &lt;*tag*&gt;</strong></p>
<blockquote>
<div>If this option is present and averaging is evoked with the <tt class="docutils literal"><span class="pre">--ave</span></tt> option,
the outfile and logfile options in the averaging description file
are ignored. Instead, trailing <tt class="docutils literal"><span class="pre">.fif</span></tt> or <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> is
removed from the raw data file name and &lt;<em>tag</em>&gt; <tt class="docutils literal"><span class="pre">.fif</span></tt> or &lt;<em>tag</em>&gt; <tt class="docutils literal"><span class="pre">.log</span></tt> is appended
to create the output and log file names, respectively.</div></blockquote>
<p><strong>&#8212;gave &lt;*name*&gt;</strong></p>
<blockquote>
<div>If multiple raw data files are specified as input and averaging
is requested, the grand average over all data files will be saved
to &lt;<em>name</em>&gt; .</div></blockquote>
<p><strong>&#8212;cov &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify the name of a description file for covariance matrix estimation. For
details of the format of this file, please see <a class="reference internal" href="#cacebacg"><em>Description files for covariance matrix estimation</em></a>.
If multiple raw data files are specified, the number of <tt class="docutils literal"><span class="pre">--cov</span></tt> options can
be smaller or equal to the number of raw data files. If it is equal, the
averaging description file names will be associated with the raw data
files in the order given. If it is smaller, the last description
file will be used for the remaining raw data files.</div></blockquote>
<p><strong>&#8212;savecovtag &lt;*tag*&gt;</strong></p>
<blockquote>
<div>If this option is present and covariance matrix estimation is evoked with
the <tt class="docutils literal"><span class="pre">--cov</span></tt> option, the outfile and logfile options in
the covariance estimation description file are ignored. Instead,
trailing <tt class="docutils literal"><span class="pre">.fif</span></tt> or <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> is removed from
the raw data file name and &lt;<em>tag</em>&gt; .fif or &lt;<em>tag</em>&gt; .log
is appended to create the output and log file names, respectively.
For compatibility with other MNE software scripts, <tt class="docutils literal"><span class="pre">--savecovtag</span> <span class="pre">-cov</span></tt> is recommended.</div></blockquote>
<p><strong>&#8212;savehere</strong></p>
<blockquote>
<div>If the <tt class="docutils literal"><span class="pre">--saveavetag</span></tt> and <tt class="docutils literal"><span class="pre">--savecovtag</span></tt> options
are used to generate the file output file names, the resulting files
will go to the same directory as raw data by default. With this
option the output files will be generated in the current working
directory instead.</div></blockquote>
<p><strong>&#8212;gcov &lt;*name*&gt;</strong></p>
<blockquote>
<div>If multiple raw data files are specified as input and covariance matrix estimation
is requested, the grand average over all data files will be saved
to &lt;<em>name</em>&gt; . The details of
the covariance matrix estimation are given in <a class="reference internal" href="#cachaaeg"><em>Covariance matrix estimation</em></a>.</div></blockquote>
<p><strong>&#8212;save &lt;*name*&gt;</strong></p>
<blockquote>
<div>Save a filtered and optionally down-sampled version of the data
file to &lt;<em>name</em>&gt; . If multiple
raw data files are specified, an equal number of <tt class="docutils literal"><span class="pre">--save</span></tt> options
should be present. If &lt;<em>filename</em>&gt; ends
with <tt class="docutils literal"><span class="pre">.fif</span></tt> or <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> , these endings are
deleted. After these modifications, <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> is inserted
after the remaining part of the file name. If the file is split
into multiple parts (see <tt class="docutils literal"><span class="pre">--split</span></tt> option below), the
additional parts will be called &lt;<em>name</em>&gt; <tt class="docutils literal"><span class="pre">-</span></tt> &lt;<em>number</em>&gt; <tt class="docutils literal"><span class="pre">_raw.fif</span></tt></div></blockquote>
<p><strong>&#8212;split &lt;*size/MB*&gt;</strong></p>
<blockquote>
<div>Specifies the maximum size of the raw data files saved with the <tt class="docutils literal"><span class="pre">--save</span></tt> option.
By default, the output is split into files which are just below
2 GB so that the fif file maximum size is not exceed.</div></blockquote>
<p><strong>&#8212;anon</strong></p>
<blockquote>
<div>Do not include any subject information in the output files created with
the <tt class="docutils literal"><span class="pre">--save</span></tt> option.</div></blockquote>
<p><strong>&#8212;decim &lt;*number*&gt;</strong></p>
<blockquote>
<div>The data are decimated by this factor before saving to the file
specified with the <tt class="docutils literal"><span class="pre">--save</span></tt> option. For decimation to
succeed, the data must be lowpass filtered to less than third of
the sampling frequency effective after decimation.</div></blockquote>
</div>
</div>
<div class="section" id="the-user-interface">
<h2>The user interface<a class="headerlink" href="#the-user-interface" title="Permalink to this headline">¶</a></h2>
<div class="figure" style="width: 100%">
<a class="reference internal image-reference" href="../_images/windows_menu-7.png"><img alt="The user interface of mne_browse_raw" src="../_images/windows_menu-7.png" style="width: 100%;" /></a>
<p class="caption">The user interface of mne_browse_raw</p>
</div>
<p>The mne_browse_raw user
interface contains the following areas:</p>
<ul class="simple">
<li>The menu bar.</li>
<li>The data display area.</li>
<li>Viewing and averaging tools.</li>
<li>Message line.</li>
</ul>
<p>The viewing and averaging tools allow quick browsing of the
raw data with triggers, adding new triggers, and averaging on a
single trigger.</p>
</div>
<div class="section" id="the-file-menu">
<h2>The File menu<a class="headerlink" href="#the-file-menu" title="Permalink to this headline">¶</a></h2>
<div class="section" id="open">
<span id="cacdchaj"></span><h3>Open<a class="headerlink" href="#open" title="Permalink to this headline">¶</a></h3>
<p>Selecting Open from file
menu pops up the dialog shown in <a class="reference internal" href="#cacbhgfe"><em>The Open dialog.</em></a>.</p>
<p>The Raw files and Maxfilter output buttons change the file name filter to include
names which end with <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> or <tt class="docutils literal"><span class="pre">sss.fif</span></tt> ,
respectively, to facilitate selection of original raw files or those
processed with the Neuromag Maxfilter (TM) software</p>
<p>The options under Software gradient compensation allow
selection of the compensation grade for the data. These selections
apply to the CTF data only. The standard choices are No compensation and Third-order gradient. If
other than No compensation is
attempted for non-CTF data, an error will be issued. The compensation
selection affects the averages and noise-covariance matrices subsequently
computed. The desired compensation takes effect independent of the
compensation state of the data in the file, <em>i.e.</em>,
already compensated data can be uncompensated and vice versa. For more
information on software gradient compensation please consult <a class="reference internal" href="convert.html#behddfbi"><em>Applying software gradient compensation</em></a>.</p>
<p>The Keep the initial skip button
controls how the initial segment of data not stored in the raw data
file is handled. During the MEG acquisition data are collected continuously
but saving to the raw data file is controlled by the Record raw button. Initial skip refers to the segment
of data between the start of the recording and the first activation
of Record raw . If Keep initial skip is set, this empty segment is taken into
account in timing, otherwise time zero is set to the beginning of
the data stored to disk.</p>
<p>When a raw data file is opened, the digital trigger channel
is scanned for events. For large files this may take a while.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After scanning the trigger channel for events, mne_browse_raw and mne_process_raw produce    a fif file containing the event information. This file will be called &lt;<em>raw data file name without fif extension</em>&gt; <tt class="docutils literal"><span class="pre">-eve.fif</span></tt> . If    the same raw data file is opened again, this file will be consulted    for event information thus making it unnecessary to scan through    the file for trigger line events.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can produce the fif event file by running mne_process_raw as follows: <tt class="docutils literal"><span class="pre">mne_process_raw</span> <span class="pre">--raw</span></tt> &lt;<em>raw data file</em>&gt; .    The fif format event files can be read and written with the mne_read_events and mne_write_events functions    in the MNE Matlab toolbox, see <a class="reference internal" href="matlab.html#ch-matlab"><em>The Matlab toolbox</em></a>.</p>
</div>
<div class="figure" id="cacbhgfe">
<img alt="Open dialog" src="../_images/open_dialog1.png" />
<p class="caption">The Open dialog.</p>
</div>
</div>
<div class="section" id="open-evoked">
<span id="babjejdg"></span><h3>Open evoked<a class="headerlink" href="#open-evoked" title="Permalink to this headline">¶</a></h3>
<p>This menu item brings up a standard file selection dialog
to load evoked-response data from files. All data sets from a file
are loaded automatically and display in the average view window,
see <a class="reference internal" href="#cacdadba"><em>Topographical data displays</em></a>. The data loaded are affected by the
scale settings, see, <a class="reference internal" href="#cacbehcd"><em>Scales</em></a>, the filter, see <a class="reference internal" href="#caccdbbg"><em>Filter</em></a>, and the options selected in the Manage averages dialog, see <a class="reference internal" href="#cacjfadf"><em>Managing averages</em></a>.</p>
</div>
<div class="section" id="save">
<span id="cacbddie"></span><h3>Save<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h3>
<p>It is possible to save filtered and projected data into a
new raw data file. When you invoke the save option from the file
menu, you will be prompted for the output file name and a down-sampling
factor. The sampling frequency after down-sampling must be at least
three times the lowpass filter corner frequency. The output will
be split into files which are just below 2 GB so that the fif file
maximum size is not exceed.</p>
<p>If &lt;<em>filename</em>&gt; ends
with <tt class="docutils literal"><span class="pre">.fif</span></tt> or <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> , these endings are
deleted. After these modifications, <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> is inserted
after the remaining part of the file name. If the file is split
into multiple parts, the additional parts will be called &lt;<em>name</em>&gt; <tt class="docutils literal"><span class="pre">-</span></tt> &lt;<em>number</em>&gt; <tt class="docutils literal"><span class="pre">_raw.fif</span></tt> .
For downsampling and saving options in mne_process_raw ,
see <a class="reference internal" href="#cacfaaaj"><em>Batch-mode options</em></a>.</p>
</div>
<div class="section" id="change-working-directory">
<h3>Change working directory<a class="headerlink" href="#change-working-directory" title="Permalink to this headline">¶</a></h3>
<p>Brings up a file selection dialog which allows changing of
the working directory.</p>
</div>
<div class="section" id="read-projection">
<span id="cacdfjda"></span><h3>Read projection<a class="headerlink" href="#read-projection" title="Permalink to this headline">¶</a></h3>
<p>Selecting Read projection... from
the File menu, pops up a dialog
to enter a name of a file containing a signal-space projection operator
to be applied to the data. There is an option to keep existing projection
items.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whenever EEG channels are present in the data,    a projection item corresponding to the average EEG reference is    automatically added.</p>
</div>
</div>
<div class="section" id="save-projection">
<h3>Save projection<a class="headerlink" href="#save-projection" title="Permalink to this headline">¶</a></h3>
<p>The Save projection... item
in the File menu pops up a dialog
to save the present projection operator into a file. Normally, the
EEG average reference projection is not included. If you want to
include it, mark the Include EEG average reference option.
If your MEG projection includes items for both magnetometers and
gradiometers and you want to use the projection operator file output
from here in the Neuromag Signal processor (graph) software,
mark the Enforce compatibility with graph option.</p>
</div>
<div class="section" id="apply-bad-channels">
<h3>Apply bad channels<a class="headerlink" href="#apply-bad-channels" title="Permalink to this headline">¶</a></h3>
<p>Applies the current selection of bad channels to the currently
open raw file.</p>
</div>
<div class="section" id="load-events-text">
<h3>Load events (text)<a class="headerlink" href="#load-events-text" title="Permalink to this headline">¶</a></h3>
<p>Reads a text format event file. For more information on events,
see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</p>
</div>
<div class="section" id="load-events-fif">
<h3>Load events (fif)<a class="headerlink" href="#load-events-fif" title="Permalink to this headline">¶</a></h3>
<p>Reads a fif format event file. For more information on events,
see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</p>
</div>
<div class="section" id="save-events-text">
<span id="cacjgifa"></span><h3>Save events (text)<a class="headerlink" href="#save-events-text" title="Permalink to this headline">¶</a></h3>
<p>Brings up a a dialog to save all or selected types of events
into a text file. This file can be edited and used in the averaging
and covariance matrix estimation as an input file to specify the
time points of events, see <a class="reference internal" href="#cacbcegc"><em>Event files</em></a>. For more information
on events, see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</p>
</div>
<div class="section" id="save-events-fif">
<h3>Save events (fif)<a class="headerlink" href="#save-events-fif" title="Permalink to this headline">¶</a></h3>
<p>Save the events in fif format. These binary event files can
be read and written with the mne_read_events and mne_write_events functions
in the MNE Matlab toolbox, see <a class="reference internal" href="matlab.html#ch-matlab"><em>The Matlab toolbox</em></a>. For more information
on events, see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</p>
</div>
<div class="section" id="load-derivations">
<span id="cacfhafh"></span><h3>Load derivations<a class="headerlink" href="#load-derivations" title="Permalink to this headline">¶</a></h3>
<p>This menu choice allows loading of channel derivation data
files created with the mne_make_derivations utility,
see <a class="reference internal" href="utilities.html#chdhjabj"><em>Creating a derivation file</em></a>, or using the interactive derivations
editor in mne_browse_raw , see <a class="reference internal" href="#cacjiehi"><em>Derivations</em></a>, Most common use of derivations is to calculate
differences between EEG channels, <em>i.e.</em>, bipolar
EEG data. Since any number of channels can be included in a derivation
with arbitrary weights, other applications are possible as well.
Before a derivation is accepted to use, the following criteria have
to be met:</p>
<ul class="simple">
<li>All channels to be combined into a single
derivation must have identical units of measure.</li>
<li>All channels in a single derivation have to be of the same
kind, <em>e.g.</em>, MEG channels or EEG channels.</li>
<li>All channels specified in a derivation have to be present
in the currently loaded data set.</li>
</ul>
<p>Multiple derivation data files can be loaded by specifying
the Keep previous derivations option in
the dialog that specifies the derivation file to be loaded. After
a derivation file has been successfully loaded, a list of available
derivations will be shown in a message dialog.</p>
<p>Each of the derived channels has a name specified when the
derivation file was created. The derived channels can be included
in channel selections, see <a class="reference internal" href="#caccjejd"><em>Selection</em></a>. At present, derived
channels cannot be displayed in topographical data displays. Derived
channels are not included in averages or noise covariance matrix
estimation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the file <tt class="docutils literal"><span class="pre">$HOME/.mne/mne_browse_raw-deriv.fif</span></tt> exists and    contains derivation data, it is loaded automatically when mne_browse_raw starts    unless the <tt class="docutils literal"><span class="pre">--deriv</span></tt> option has been used to specify    a nonstandard derivation file, see <a class="reference internal" href="#cacchaga"><em>Interactive mode options</em></a>.</p>
</div>
</div>
<div class="section" id="save-derivations">
<h3>Save derivations<a class="headerlink" href="#save-derivations" title="Permalink to this headline">¶</a></h3>
<p>Saves the current derivations into a file.</p>
</div>
<div class="section" id="load-channel-selections">
<h3>Load channel selections<a class="headerlink" href="#load-channel-selections" title="Permalink to this headline">¶</a></h3>
<p>This choice loads a new set of channel selections. The default
directory for the selections is $HOME/.mne. If this directory does
not exist, it will be created before bringing up the file selection
dialog to load the selections.</p>
</div>
<div class="section" id="save-channel-selections">
<span id="cacddcgf"></span><h3>Save channel selections<a class="headerlink" href="#save-channel-selections" title="Permalink to this headline">¶</a></h3>
<p>This choice brings up a dialog to save the current channel
selections. This is particularly useful if the standard set of selections
has been modified as explained in <a class="reference internal" href="#caccjejd"><em>Selection</em></a>. The default
directory for the selections is $HOME/.mne. If this directory does
not exist, it will be created before bringing up the file selection
dialog to save the selections. Note that all currently existing
selections will be saved, not just those added to the ones initially
loaded.</p>
</div>
<div class="section" id="quit">
<h3>Quit<a class="headerlink" href="#quit" title="Permalink to this headline">¶</a></h3>
<p>Exits the program without questions asked.</p>
</div>
</div>
<div class="section" id="the-adjust-menu">
<h2>The Adjust menu<a class="headerlink" href="#the-adjust-menu" title="Permalink to this headline">¶</a></h2>
<div class="section" id="filter">
<span id="caccdbbg"></span><h3>Filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h3>
<p>Selecting Filter... from
the Adjust menu pops up the dialog
shown in <a class="reference internal" href="#cacceegi"><em>The filter adjustment dialog.</em></a>.</p>
<div class="figure align-center" id="cacceegi" style="width: 55%">
<a class="reference internal image-reference" href="../_images/filter_dialog.png"><img alt="filter adjustment dialog" src="../_images/filter_dialog.png" style="width: 400px;" /></a>
<p class="caption">The filter adjustment dialog.</p>
</div>
<p>The items in the dialog have the following functions:</p>
<p><strong>Highpass (Hz)</strong></p>
<blockquote>
<div>The half-amplitude point of the highpass filter. The width of the transition
from zero to one can be specified with the <tt class="docutils literal"><span class="pre">--highpassw</span></tt> command-line
option, see <a class="reference internal" href="#cachcfeg"><em>Command-line options</em></a>. Lowest feasible highpass value
is constrained by the length of the filter and sampling frequency.
You will be informed when you press OK or Apply if
the selected highpass could not be realized. The default value zero means
no highpass filter is applied in addition to the analog highpass
present in the data.</div></blockquote>
<p><strong>Lowpass (Hz)</strong></p>
<blockquote>
<div>The half-amplitude point of the lowpass filter.</div></blockquote>
<p><strong>Lowpass transition (Hz)</strong></p>
<blockquote>
<div>The width of the <img class="math" src="../_images/math/61696967808935c28edba1af4ce3b63ede193f38.png" alt="\cos^2"/>-shaped transition
from one to zero, centered at the Lowpass value.</div></blockquote>
<p><strong>Filter active</strong></p>
<blockquote>
<div>Selects whether or not the filter is applied to the data.</div></blockquote>
<p>The filter is realized in the frequency domain and has a
zero phase shift. When a filter is in effect, the value of the first
sample in the file is subtracted from the data to correct for an
initial dc offset. This procedure also eliminates any filter artifacts
in the beginning of the data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The filter affects both the raw data and evoked-response    data loaded from files. However, the averages computed in mne_browse_raw and shown    in the topographical display are not refiltered if the filter is    changed after the average was computed.</p>
</div>
</div>
<div class="section" id="scales">
<span id="cacbehcd"></span><h3>Scales<a class="headerlink" href="#scales" title="Permalink to this headline">¶</a></h3>
<p>Selecting Scales... from
the Adjust menu pops up the dialog
shown in <a class="reference internal" href="#cacbjgba"><em>The Scales dialog.</em></a>.</p>
<div class="figure" id="cacbjgba" style="width: 100%">
<a class="reference internal image-reference" href="../_images/scales_dialog1.png"><img alt="Scales dialog" src="../_images/scales_dialog1.png" style="width: 100%;" /></a>
<p class="caption">The Scales dialog.</p>
</div>
<p>The items in the dialog have the following functions:</p>
<p><strong>MEG (fT/cm)</strong></p>
<blockquote>
<div>Sets the scale for MEG planar gradiometer channels in fT/cm. All scale
values are defined from zero to maximum, <em>i.e.</em>,
the viewport where signals are plotted in have the limits ± &lt;<em>scale value</em>&gt; .</div></blockquote>
<p><strong>MEG axmult (cm)</strong></p>
<blockquote>
<div>The scale for MEG magnetometers and axial gradiometers is defined
by multiplying the gradiometer scale by this number, yielding units
of fT.</div></blockquote>
<p><strong>EEG</strong> (<img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>)</p>
<blockquote>
<div>The scale for EEG channels in <img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>.</div></blockquote>
<p><strong>EOG</strong> (<img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>)</p>
<blockquote>
<div>The scale for EOG channels in <img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>.</div></blockquote>
<p><strong>ECG (mV)</strong></p>
<blockquote>
<div>The scale for ECG channels in mV.</div></blockquote>
<p><strong>EMG (mV)</strong></p>
<blockquote>
<div>The scale for EMG channels in mV.</div></blockquote>
<p><strong>MISC (V)</strong></p>
<blockquote>
<div>The scale for MISC channels in V.</div></blockquote>
<p><strong>Time span (s)</strong></p>
<blockquote>
<div>The length of raw data displayed in the main window at a time.</div></blockquote>
<p><strong>Show stimulus markers</strong></p>
<blockquote>
<div>Draw vertical lines at time points where the digital trigger channel has
a transition from zero to a nonzero value.</div></blockquote>
<p><strong>Segment min. time (s)</strong></p>
<blockquote>
<div>It is possible to show data segments in the topographical (full
view) layout, see below. This parameter sets the starting time point,
relative to the selected time, to be displayed.</div></blockquote>
<p><strong>Segment max. time (s)</strong></p>
<blockquote>
<div>This parameter sets the ending time point, relative to the current time,
to be displayed in the topographical layout.</div></blockquote>
<p><strong>Show segments in full view</strong></p>
<blockquote>
<div>Switches on the display of data segments in the topographical layout.</div></blockquote>
<p><strong>Show segments in sample view</strong></p>
<blockquote>
<div>Switches on the display of data segments in a &#8220;sidebar&#8221; to
the right of the main display.</div></blockquote>
<p><strong>Show channel names</strong></p>
<blockquote>
<div>Show the names of the channels in the topographical displays.</div></blockquote>
<p><strong>Text size</strong></p>
<blockquote>
<div>Size of the channel number text as a fraction of the height of each viewport.</div></blockquote>
<p><strong>Show viewport frames</strong></p>
<blockquote>
<div>Show the boundaries of the viewports in the topographical displays.</div></blockquote>
<p><strong>Show zeroline and zerolevel</strong></p>
<blockquote>
<div>Show the zero level, <em>i.e.</em>, the baseline level
in the topographical displays. In addition, the zero time point
is indicated in the average views if it falls to the time range, <em>i.e.</em>,
if the minimum of the time scale is negative and the maximum is
positive.</div></blockquote>
<p><strong>Scale magnification for averages</strong></p>
<blockquote>
<div>For average displays, the scales are made more sensitive by this
factor.</div></blockquote>
<p><strong>Average display baseline min (ms)</strong></p>
<blockquote>
<div>Sets the lower time limit for the average display baseline. This
setting does not affect the averages stored.</div></blockquote>
<p><strong>Average display baseline max (ms)</strong></p>
<blockquote>
<div>Sets the upper time limit for the average display baseline. This
setting does not affect the averages stored.</div></blockquote>
<p><strong>Use average display baseline</strong></p>
<blockquote>
<div>Switches the application of a baseline to the displayed averages
on and off.</div></blockquote>
<p><strong>Average time range min (ms)</strong></p>
<blockquote>
<div>Sets the minimum time for the average display. This setting is inactive
if Autoscale time range is on.</div></blockquote>
<p><strong>Average time range max (ms)</strong></p>
<blockquote>
<div>Sets the maximum time for the average data display. This setting
is inactive if Autoscale time range is
on.</div></blockquote>
<p><strong>Autoscale time range</strong></p>
<blockquote>
<div>Set the average display time range automatically to be long enough to
accommodate all data.</div></blockquote>
</div>
<div class="section" id="colors">
<h3>Colors<a class="headerlink" href="#colors" title="Permalink to this headline">¶</a></h3>
<p>Shows a dialog which allows changes to the default colors
of various display items.</p>
</div>
<div class="section" id="derivations">
<span id="cacjiehi"></span><h3>Derivations<a class="headerlink" href="#derivations" title="Permalink to this headline">¶</a></h3>
<p>Brings up the interactive derivations editor. This editor
can be used to add or modify derived channels, <em>i.e.</em>,
linear combinations of signals actually recorded. Channel derivations
can be also created and modified using the mne_make_derivations tool,
see <a class="reference internal" href="utilities.html#chdhjabj"><em>Creating a derivation file</em></a>. The interactive editor contains two main
areas:</p>
<ul class="simple">
<li>Interactive tools for specifying a channel
linear combination. This tool is limited to combining up to five
channels in each of the derivations. Clicking Add after
defining the name of the new derivation, the weights of the component
channels and their names, adds the corresponding arithmetic expression
to the text area.</li>
<li>Text area which contains the currently defined derivations
as arithmetic expressions in a format identical to that used by mne_make_derivations .
These expressions can be manually edited before accepting the new
set of derivations. Initially, the text area will contain the derivations
already defined.</li>
</ul>
<p>The Define button interprets
the arithmetic expressions in the text area as new derivations and
closes the dialog. The Cancel button
closes the dialog without any change in the derivations.</p>
<p>Recommended workflow for defining derived EEG channels and
associated selections interactively involves the following steps:</p>
<ul class="simple">
<li>If desired, EEG channels can be relabeled
with descriptive names using the mne_rename_channels utility,
see <a class="reference internal" href="utilities.html#chdcfeaj"><em>Modifying channel names and types: mne_rename_channels</em></a>. It is strongly recommended that you
keep a copy of the channel alias file used by mne_rename_channels .
If necessary, you can then easily return to the original channel
names by running mne_rename_channels again
with the <tt class="docutils literal"><span class="pre">--revert</span></tt> option.</li>
<li>Load the data file into mne_browse_raw and
use the interactive derivations editor to create the desired derived
channels. These are usually differences between the signals in two
EEG electrodes.</li>
<li>Save the derivations from the file menu.</li>
<li>If desired, move the derivations file to the standard location
(<tt class="docutils literal"><span class="pre">$HOME/.mne/mne_browse_raw-deriv.fif</span></tt> ).</li>
<li>Create new channel selections employing the original and derived channels
using the channel selection tool described in <a class="reference internal" href="#caccjejd"><em>Selection</em></a>.</li>
<li>Save the new channel selections from the file menu.</li>
<li>If desired, change the order of the channels in the selections
in the selection file by editing it in a text editor and move it
to the standard location <tt class="docutils literal"><span class="pre">$HOME/.mne/mne_browse_raw.sel</span></tt> .</li>
</ul>
</div>
<div class="section" id="selection">
<span id="caccjejd"></span><h3>Selection<a class="headerlink" href="#selection" title="Permalink to this headline">¶</a></h3>
<p>Brings up a dialog to select channels to be shown in the
main raw data display. This dialog also allows modification of the
set of channel selections as described below.</p>
<p>By default, the available selections are defined by the file <tt class="docutils literal"><span class="pre">$MNE_ROOT/share/mne/mne_browse_raw/mne_browse_raw.sel</span></tt> .
This default channel selection file can be modified by copying the
file into <tt class="docutils literal"><span class="pre">$HOME/.mne/mne_browse_raw.sel</span></tt> . The format
of this text file should be self explanatory.</p>
<div class="figure" id="cacihffh">
<img alt="channel selection dialog" src="../_images/channel_selection.png" />
<p class="caption">The channel selection dialog.</p>
</div>
<p>The channel selection dialog is shown in <a class="reference internal" href="#cacihffh"><em>The channel selection dialog.</em></a>.
The number of items in the selection list depends on the contents
of your selection file. If the list has the keyboard focus you can
easily move from one selection to another with the up and down arrow
keys.</p>
<p>The two buttons below the channel selection buttons facilitate
the modification of the selections:</p>
<p><strong>Add...</strong></p>
<blockquote>
<div>Brings up the selection dialog shown in <a class="reference internal" href="#cacfeced"><em>Dialog to create a new channel selection.</em></a> to
create new channel selections.</div></blockquote>
<p><strong>Omit current</strong></p>
<blockquote>
<div>Delete the current channel selection. Deletion only affects the
selections in the memory of the program. To save the changes permanently
into a file, use Save channel selections... in
the File menu, see <a class="reference internal" href="#cacddcgf"><em>Save channel selections</em></a>.</div></blockquote>
<div class="figure" id="cacfeced">
<img alt="Dialog to create a new channel selection" src="../_images/new_selection.png" />
<p class="caption">Dialog to create a new channel selection.</p>
</div>
<p>The components of the selection creation dialog shown in <a class="reference internal" href="#cacfeced"><em>Dialog to create a new channel selection.</em></a> have the following functions:</p>
<p><strong>List of channel names</strong></p>
<blockquote>
<div>The channels selected from this list will be included in the new channel
selection. A selection can be extended with the control key. A range
of channels can be selected with the shift key. The list contains
both the original channels actually present in the file and the names
of the channels in currently loaded derivation data, see <a class="reference internal" href="#cacfhafh"><em>Load derivations</em></a>.</div></blockquote>
<p><strong>Regexp:</strong></p>
<blockquote>
<div>This provides another way to select channels. By entering here a regular
expression as defined in IEEE Standard 1003.2 (POSIX.2), all channels
matching it will be selected and added to the present selection.
An empty expression deselects all items in the channel list. Some
useful regular expressions are listed in <a class="reference internal" href="#cachchdj"><em>Examples of regular expressions for channel selections</em></a>.
In the present version, regular matching does not look at the derived
channels.</div></blockquote>
<p><strong>Name:</strong></p>
<blockquote>
<div>This text field specifies the name of the new selection.</div></blockquote>
<p><strong>Select</strong></p>
<blockquote>
<div>Select the channels specified by the regular expression. The same effect
can be achieved by entering return in the Regexp: .</div></blockquote>
<p><strong>Add</strong></p>
<blockquote>
<div>Add a new channel selection which contains the channels selected from
the channel name list. The name of the selection is specified with
the Name: text field.</div></blockquote>
<table border="1" class="docutils" id="cachchdj">
<caption>Examples of regular expressions for channel selections</caption>
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Regular expression</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MEG</span></tt></td>
<td>Selects all MEG channels.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">EEG</span></tt></td>
<td>Selects all EEG channels.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MEG.*1$</span></tt></td>
<td>Selects all MEG channels whose names end
with the number 1, <em>i.e.</em>, all magnetometer
channels.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MEG.*[2,3]$</span></tt></td>
<td>Selects all MEG gradiometer channels.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">EEG|STI</span> <span class="pre">014</span></tt></td>
<td>Selects all EEG channels and stimulus
channel STI 014.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">^M</span></tt></td>
<td>Selects all channels whose names begin with
the letter M.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The interactive tool for creating the channel    selections does not allow you to change the order of the selected    channels from that given by the list of channels. However, the ordering    can be easily changed by manually editing the channel selection    file in a text editor.</p>
</div>
</div>
<div class="section" id="full-view-layout">
<span id="cacfggcf"></span><h3>Full view layout<a class="headerlink" href="#full-view-layout" title="Permalink to this headline">¶</a></h3>
<p>Shows a selection of available layouts for the topographical
views (full view and average display). The system-wide layout files
reside in <tt class="docutils literal"><span class="pre">$MNE_ROOT/share/mne/mne_analyze/lout</span></tt> . In
addition any layout files residing in <tt class="docutils literal"><span class="pre">$HOME/.mne/lout</span></tt> are
listed. The default layout is Vectorview-grad. If there is a layout
file in the user&#8217;s private layout directory ending with <tt class="docutils literal"><span class="pre">-default.lout</span></tt> ,
that layout will be used as the default instead. The Default button
returns to the default layout.</p>
<p>The format of the layout files is:</p>
<blockquote>
<div><div class="line-block">
<div class="line">&lt;<em>plot area limits</em>&gt;</div>
<div class="line">&lt;<em>viewport definition #1</em>&gt;</div>
<div class="line">...</div>
<div class="line">&lt;<em>viewport definition #N</em>&gt;</div>
</div>
</div></blockquote>
<p>The &lt;<em>plot area limits</em>&gt; define
the size of the plot area (<img class="math" src="../_images/math/d8b22fcf46c7db0309650cbdee4520fab715d5be.png" alt="x_{min}\ x_{max}\ y_{min}\ y_{max}"/>) which should accommodate all view ports. When the layout is used, the
plot area will preserve its aspect ratio; if the plot window has
a different aspect ratio, there will be empty space on the sides.</p>
<p>The viewports define the locations of the individual channels
in the plot. Each viewport definition consists of</p>
<blockquote>
<div>&lt;<em>number</em>&gt; <img class="math" src="../_images/math/3fb0be26c4da22b7c736f5e3f4135ed9b2961d28.png" alt="x_0\ y_0"/> &lt;<em>width</em>&gt; &lt;<em>height</em>&gt; &lt;<em>name</em>&gt; [: &lt;<em>name</em>&gt; ] ...</div></blockquote>
<p>where number is a viewport number (not used by the MNE software), <img class="math" src="../_images/math/c3c08496f07567285212e468b173bea9ca153fab.png" alt="x_0"/> and <img class="math" src="../_images/math/f7e73389b494d356293b5ad9e3601a3a61609e96.png" alt="y_0"/> are
the coordinates of the lower-left corner of the viewport, &lt;<em>width</em>&gt; and &lt;<em>height</em>&gt; are
the viewport dimensions, and &lt;<em>name</em>&gt; is
a name of a channel. Multiple channel names can be specified by
separating them with a colon.</p>
<p>When a measurement channel name is matched to a layout channel
name, all spaces are removed from the channel names and the both
the layout channel name and the data channel name are converted
to lower case. In addition anything including and after a hyphen
(-) is omitted. The latter convention facilitates using CTF MEG
system data, which has the serial number of the system appended
to the channel name with a dash. Removal of the spaces is important
for the Neuromag Vectorview data because newer systems do not have
spaces in the channel names like the original Vectorview systems
did.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mne_make_eeg_layout utility    can be employed to create a layout file matching the positioning    of EEG electrodes, see <a class="reference internal" href="utilities.html#chddgdja"><em>Creating a custom EEG layout</em></a>.</p>
</div>
</div>
<div class="section" id="projection">
<span id="cacddidh"></span><h3>Projection<a class="headerlink" href="#projection" title="Permalink to this headline">¶</a></h3>
<p>Lists the currently available signal-space projection (SSP)
vectors and allows the activation and deactivation of items. For
more information on SSP, see <a class="reference internal" href="#cacchabi"><em>The Signal-Space Projection (SSP) method</em></a>.</p>
</div>
<div class="section" id="compensation">
<h3>Compensation<a class="headerlink" href="#compensation" title="Permalink to this headline">¶</a></h3>
<p>Brings up a dialog to select software gradient compensation.
This overrides the choice made at the open time. For details, see <a class="reference internal" href="#cacdchaj"><em>Open</em></a>, above.</p>
</div>
<div class="section" id="averaging-preferences">
<span id="cacbiahd"></span><h3>Averaging preferences<a class="headerlink" href="#averaging-preferences" title="Permalink to this headline">¶</a></h3>
<div class="figure" id="caccffah" style="width: 35%">
<a class="reference internal image-reference" href="../_images/average_pref.png"><img alt="Averaging preferences" src="../_images/average_pref.png" style="width: 300px;" /></a>
<p class="caption">Averaging preferences.</p>
</div>
<p>Selecting Averaging preferences... from
the Adjust menu pops up the dialog
shown in <a class="reference internal" href="#caccffah"><em>Averaging preferences.</em></a>. These settings apply only to the
simple averages calculated with help of tools residing just below
the main raw data display, see <a class="reference internal" href="#cacdfgae"><em>The tool bar</em></a>. These settings
are also applied when a covariance matrix is computed to create
a SSP operator as described in <a class="reference internal" href="#caceahei"><em>Creating a new SSP operator</em></a> and in the
computation of a covariance matrix from raw data, see <a class="reference internal" href="#babjeigj"><em>Estimation of a covariance matrix from raw data</em></a>.</p>
<p>The items in the dialog have the following functions:</p>
<p><strong>Starting time (ms)</strong></p>
<blockquote>
<div>Beginning time of the epoch to be averaged (relative to the trigger).</div></blockquote>
<p><strong>Ending time (ms)</strong></p>
<blockquote>
<div>Ending time of the epoch to be averaged.</div></blockquote>
<p><strong>Ignore around stimulus (ms)</strong></p>
<blockquote>
<div>Ignore this many milliseconds on both sides of the trigger when considering
the epoch. This parameter is useful for ignoring large stimulus
artefacts, <em>e.g.</em>, from electrical somatosensory
stimulation.</div></blockquote>
<p><strong>MEG grad rejection (fT/cm)</strong></p>
<blockquote>
<div>Rejection criterion for MEG planar gradiometers. If the peak-to-peak
value of any planar gradiometer epoch exceed this value, it will
be omitted. A negative value turns off rejection for a particular channel
type.</div></blockquote>
<p><strong>MEG mag rejection (fT)</strong></p>
<blockquote>
<div>Rejection criterion for MEG magnetometers and axial gradiometers.</div></blockquote>
<p><strong>EEG rejection</strong> (<img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>)</p>
<blockquote>
<div>Rejection criterion for EEG channels.</div></blockquote>
<p><strong>EOG rejection</strong> (<img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>)</p>
<blockquote>
<div>Rejection criterion for EOG channels.</div></blockquote>
<p><strong>ECG rejection (mV)</strong></p>
<blockquote>
<div>Rejection criterion for ECG channels.</div></blockquote>
<p><strong>MEG grad no signal (fT/cm)</strong></p>
<blockquote>
<div>Signal detection criterion for MEG planar gradiometers. The peak-to-peak
value of all planar gradiometer signals must exceed this value,
for the epoch to be included. This criterion allows rejection of data
with saturated or otherwise dysfunctional channels.</div></blockquote>
<p><strong>MEG mag no signal (fT)</strong></p>
<blockquote>
<div>Signal detection criterion for MEG magnetometers and axial gradiometers.</div></blockquote>
<p><strong>EEG no signal</strong> (<img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>)</p>
<blockquote>
<div>Signal detection criterion for EEG channels.</div></blockquote>
<p><strong>EOG no signal</strong> (<img class="math" src="../_images/math/a1f452effcb329f669964ce220506355acce4de5.png" alt="\mu V"/>)</p>
<blockquote>
<div>Signal detection criterion for EOG channels.</div></blockquote>
<p><strong>ECG no signal (mV)</strong></p>
<blockquote>
<div>Signal detection criterion for ECG channels.</div></blockquote>
<p><strong>Fix trigger skew</strong></p>
<blockquote>
<div>This option has the same effect as the FixSkew parameter
in averaging description files, see <a class="reference internal" href="#babihfbi"><em>Common parameters</em></a>.</div></blockquote>
<p><strong>Trace color</strong></p>
<blockquote>
<div>The color assigned for the averaged traces in the display can be adjusted
by pressing this button.</div></blockquote>
</div>
</div>
<div class="section" id="the-process-menu">
<h2>The Process menu<a class="headerlink" href="#the-process-menu" title="Permalink to this headline">¶</a></h2>
<div class="section" id="averaging">
<h3>Averaging<a class="headerlink" href="#averaging" title="Permalink to this headline">¶</a></h3>
<p>The Average... menu item
pops up a file selection dialog to access a description file for
batch-mode averaging. The structure of these files is described
in <a class="reference internal" href="#cacbbdgc"><em>Description files for off-line averaging</em></a>. All parameters for the averaging are
taken from the description file, <em>i.e.</em>, the
parameters set in the averaging preferences dialog (<a class="reference internal" href="#cacbiahd"><em>Averaging preferences</em></a>) do not effect the result.</p>
</div>
<div class="section" id="estimation-of-a-covariance-matrix">
<h3>Estimation of a covariance matrix<a class="headerlink" href="#estimation-of-a-covariance-matrix" title="Permalink to this headline">¶</a></h3>
<p>The Compute covariance... menu
item pops up a file selection dialog to access a description file
which specifies the options for the estimation of a covariance matrix.
The structure of these files is described in <a class="reference internal" href="#cacebacg"><em>Description files for covariance matrix estimation</em></a>.</p>
</div>
<div class="section" id="estimation-of-a-covariance-matrix-from-raw-data">
<span id="babjeigj"></span><h3>Estimation of a covariance matrix from raw data<a class="headerlink" href="#estimation-of-a-covariance-matrix-from-raw-data" title="Permalink to this headline">¶</a></h3>
<p>The Compute raw data covariance... menu
item pops up a dialog which specifies a time range for raw data
covariance matrix estimation and the file to hold the result. If
a covariance matrix is computed in this way, the rejection parameters
specified in averaging preferences are in effect. For description
of the rejection parameters, see <a class="reference internal" href="#cacbiahd"><em>Averaging preferences</em></a>. The time
range can be also selected interactively from the main raw data
display by doing a range selection with shift left button drag.</p>
</div>
<div class="section" id="creating-a-new-ssp-operator">
<span id="caceahei"></span><h3>Creating a new SSP operator<a class="headerlink" href="#creating-a-new-ssp-operator" title="Permalink to this headline">¶</a></h3>
<p>The Create a new SSP operator... menu
choice computes a new SSP operator as discussed in <a class="reference internal" href="#babffchf"><em>Estimation of the noise subspace</em></a>.</p>
<div class="figure" id="babhaghf">
<img alt="Time range specification for SSP operator calculation" src="../_images/new_ssp.png" />
<p class="caption">Time range specification for SSP operator calculation</p>
</div>
<p>When Create a new SSP operator... selected,
a window shown in <a class="reference internal" href="#babhaghf"><em>Time range specification for SSP operator calculation</em></a> is popped up. It allows
the specification of a time range to be employed in the calculation
of a raw data covariance matrix. The time range can be also selected
interactively from the main raw data display by doing a range selection
with shift left button drag. Normally, you should use empty room
data for this computation. For the estimation of the covariance
matrix any existing projection will be temporarily switched off. Remember
to inspect your data for bad channels and select an appropriate filter
setting before creating a new SSP operator. The artifact rejection parameters
specified averaging preferences will be applied in the covariance
matrix calculation, see <a class="reference internal" href="#cacbiahd"><em>Averaging preferences</em></a>.</p>
<p>Instead of using continuous raw data, it is also possible
to employ short epochs around triggers (events) in the calculation
of the new SSP operator by specifying a positive event number in
the time specification dialog. This option is very useful, <em>e.g.</em>,
to remove MCG/ECG artifacts from the data to facilitate detection
of epileptic spikes:</p>
<ul class="simple">
<li>Select left or right temporal channels
to the display.</li>
<li>Mark several peaks of the MCG signal in the data: click on
the first one and control click on the subsequent ones to extend
the selection.</li>
<li>Select an event number next to the Picked to button in the tool bar, see <a class="reference internal" href="#cacdfgae"><em>The tool bar</em></a>,
and click Picked to . As a result
the lines marking the events will change color (by default from
green to blue) indicating transition to user-created events.</li>
<li>Specify an epoch time range to be employed and the event number selected
in the previous step for the SSP operator calculation.</li>
</ul>
<p>Once the parameters are set, click Compute to
calculate a covariance matrix according to you your specifications.
Once the covariance matrix is ready, the parts corresponding to
magnetometer or axial gradiometer, planar gradiometer, and EEG channels
are separated and the corresponding eigenvectors and eigenvalues
are computed. Once complete, a projection selector with eight magnetometer
eigenvectors, five planar gradiometer eigenvectors, three EEG eigenvectors,
as well as the existing projection items is displayed.</p>
<p>Using the projection selector, you can experiment which vectors
have a significant effect on the noise level of the data. You should
strive for using a minimal number of vectors. When the selection
is complete, you can click Accept to
introduce this selection of vectors as the new projection operator. Discard abandons
the set of calculated vectors. Whenever EEG channels are present
in the data, a projection item corresponding to the average EEG
reference is automatically added when a new projection operator
is introduced. More information on the SSP method can be found in <a class="reference internal" href="#cacchabi"><em>The Signal-Space Projection (SSP) method</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The new projection data created in mne_browse_raw is    not automatically copied to the data file. You need to create a    standalone projection file from File/Save projection... to    save the new projection data and load it manually after the data    file has been loaded if you want to include in any subsequent analysis.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The command-line options for mne_process_raw allow    calculation of the SSP operator from continuous data in the batch    mode, see <a class="reference internal" href="#cacfaaaj"><em>Batch-mode options</em></a>.</p>
</div>
</div>
</div>
<div class="section" id="the-windows-menu">
<span id="babdjggj"></span><h2>The Windows menu<a class="headerlink" href="#the-windows-menu" title="Permalink to this headline">¶</a></h2>
<p>The Windows menu contains
the following items:</p>
<p><strong>Show full view...</strong></p>
<blockquote>
<div>Brings up the topographical display of epochs extracted from the raw
data, see <a class="reference internal" href="#cacdadba"><em>Topographical data displays</em></a>.</div></blockquote>
<p><strong>Show averages...</strong></p>
<blockquote>
<div>Brings up the topographical display showing averaged data. These data
may include data averaged in the current mne_browse_raw session
or those loaded from files, see <a class="reference internal" href="#babjejdg"><em>Open evoked</em></a>.</div></blockquote>
<p><strong>Show event list...</strong></p>
<blockquote>
<div>Brings up a window containing a list of the currently defined events. Clicking
on an event in the list, the event is selected, a green cursor appears
at the event, and the event is brought to the middle of the raw
data display. The event list displayed can be also restricted to user-defined
events (annotations) and user-defined events can be deleted. For
further information, see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</div></blockquote>
<p><strong>Show annotator...</strong></p>
<blockquote>
<div>Brings up a window which allows adding new events to the data with
annotations or comments. For details, see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</div></blockquote>
<p><strong>Manage averages...</strong></p>
<blockquote>
<div>Brings up a dialog to control the averaged data sets, see <a class="reference internal" href="#cacjfadf"><em>Managing averages</em></a>.</div></blockquote>
<p><strong>Start mne_analyze...</strong></p>
<blockquote>
<div>Start interaction between mne_browse_raw and mne_analyze .
For details, see <a class="reference internal" href="#cacghegc"><em>Interacting with mne_analyze</em></a>.</div></blockquote>
<p><strong>Show head position</strong></p>
<blockquote>
<div>Starts mne_analyze in the head position visualization mode and shows
the relative position of the MEG sensor array and the head using
the data in the presently open raw data file. For more details on
the head position visualization mode, see Section 7.21.**what?? does not exist!**</div></blockquote>
<p><strong>Quit mne_analyze...</strong></p>
<blockquote>
<div>Quits the mne_analyze program
started with Start mne_analyze...</div></blockquote>
</div>
<div class="section" id="the-help-menu">
<h2>The Help menu<a class="headerlink" href="#the-help-menu" title="Permalink to this headline">¶</a></h2>
<p>The contents of the Help menu
is shown in <a class="reference internal" href="#help-menu-browse"><em>The Help menu.</em></a>:</p>
<div class="figure" id="help-menu-browse">
<img alt="Help menu" src="../_images/help_menu1.png" />
<p class="caption">The Help menu.</p>
</div>
<p><strong>On version...</strong></p>
<blockquote>
<div>Displays the version and compilation date of the program.</div></blockquote>
<p><strong>On license...</strong></p>
<blockquote>
<div>Displays the license information.</div></blockquote>
<p><strong>About current data...</strong></p>
<blockquote>
<div>Displays essential information about the currently loaded data set.</div></blockquote>
<p><strong>Why the beep?</strong></p>
<blockquote>
<div>In some simple error situations, mne_browse_raw does
not pop up an error dialog but refuses the action and rings the
bell. The reason for this can be displayed through this help menu
item.</div></blockquote>
</div>
<div class="section" id="the-raw-data-display">
<h2>The raw data display<a class="headerlink" href="#the-raw-data-display" title="Permalink to this headline">¶</a></h2>
<p>The main data displays shows a section of the raw data in
a strip-chart recorder format. The names of the channels displayed
are shown on the left. The selection of channels is controlled from
the selection dialog, see <a class="reference internal" href="#caccjejd"><em>Selection</em></a>. The length of
the data section displayed is controlled from the scales dialog
(<a class="reference internal" href="#cacbehcd"><em>Scales</em></a>) and the filtering from the filter dialog (<a class="reference internal" href="#caccdbbg"><em>Filter</em></a>). A signal-space projection can be applied
to the data by loading a projection operator (<a class="reference internal" href="#cacdfjda"><em>Read projection</em></a>).
The selection of the projection operator items is controlled from
the projection dialog described in <a class="reference internal" href="#cacddidh"><em>Projection</em></a>.</p>
<p>The control and browsing functions of the main data display
are:</p>
<p><strong>Selection of bad channels</strong></p>
<blockquote>
<div>If you click on a channel name the corresponding channel is marked bad
or reinstated as an acceptable one. A channel marked bad is not considered
in the artefact rejection procedures in averaging and it is omitted
from the signal-space projection operations.</div></blockquote>
<p><strong>Browsing</strong></p>
<blockquote>
<div>Browsing through the data. The section of data displayed can be selected
from the scroll bar at the bottom of the display. Additional browsing
functionality will be discussed n In addition, if the strip-chart
display has the keyboard focus, you can scroll back and forth with
the page up and page down keys.</div></blockquote>
<p><strong>Selection of time points</strong></p>
<blockquote>
<div>When you click on the data with the left button, a vertical marker appears.
If Show segments in full view and/or Show segments in sample view is active in the scales
dialog (see <a class="reference internal" href="#cacbehcd"><em>Scales</em></a>), a display of an epoch of data
specified in the scales dialog will appear. For more information
on full view, see <a class="reference internal" href="#cacdadba"><em>Topographical data displays</em></a>. Multiple time points can
be selected by holding the control key down when clicking. If multiple
time points are selected several samples will be shown in the sample
and/or full view, aligned at the picked time point. The tool bar
offers functions to operate on the selected time points, see <a class="reference internal" href="#cacdfgae"><em>The tool bar</em></a>.</div></blockquote>
<p><strong>Range selection</strong></p>
<blockquote>
<div>Range selection. If you drag on the signals with the left mouse
button and the shift key down, a range of times will be selected
and displayed in the sample and/or full view. Note: All previous
selections are cleared by this operation.</div></blockquote>
<p><strong>Saving a copy of the display</strong></p>
<blockquote>
<div>The right mouse button invokes a popup menu which allows saving of
the display in various formats. Best quality is achieved with the Illustrator
format. This format has the benefit that it is object oriented and
can be edited in Adobe Illustrator.</div></blockquote>
<p><strong>Drag and drop</strong></p>
<blockquote>
<div>Graphics can be moved to one of the Elekta-Neuromag report composer
(cliplab ) view areas with the
middle mouse button.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When selecting bad channels, switch the signal-space    projection off from the projection dialog. Otherwise bad channels    may not be easily recognizable.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The cliplab drag-and-drop    functionality requires that you have the proprietary Elekta-Neuromag    analysis software installed. mne_browse_raw is    compatible with cliplab versions    1.2.13 and later.</p>
</div>
<div class="section" id="browsing-data">
<span id="babidadb"></span><h3>Browsing data<a class="headerlink" href="#browsing-data" title="Permalink to this headline">¶</a></h3>
<p>If the strip-chart display has
the input focus (click on it, if you are unsure) the keyboard and
mouse can be used to browse the data as follows:</p>
<p><strong>Up and down arrow keys</strong></p>
<blockquote>
<div>Activate the previous or next selection in the selection list.</div></blockquote>
<p><strong>Left and right arrow keys</strong></p>
<blockquote>
<div>If a single time point is selected (green line), move the time point forward
and backward by <img class="math" src="../_images/math/5afef8883a1e1142173e76df8d16e764b2779782.png" alt="\pm 1"/> ms. If the shift
key is down, the time point is moved by <img class="math" src="../_images/math/93065742421be37475f36201af54ad8247d763d3.png" alt="\pm 10"/> ms.
If the control key is down (with or without shift), the time point
is moved by <img class="math" src="../_images/math/53e48e42bc998fc8976ceaeabffba4e2fb509318.png" alt="\pm 100"/> ms. If mne_browse_raw is
controlling mne_analyze (see <a class="reference internal" href="#cacghegc"><em>Interacting with mne_analyze</em></a>), the mne_analyze displays
will be updated accordingly. If the picked time point falls outside
the currently displayed section of data, the display will be automatically
scrolled backwards or forwards as needed.</div></blockquote>
<p><strong>Rotate the mouse wheel or rotate the trackball up/down</strong></p>
<blockquote>
<div>Activate the previous or next selection in the selection list.</div></blockquote>
<p><strong>Rotate the trackball left/right or rotate the wheel with shift down</strong></p>
<blockquote>
<div>Scroll backward or forward in the data by one screen. With Alt key (Command or Apple key
in the Mac keyboard), the amount of scrolling will be <img class="math" src="../_images/math/123e375e88da91240024aaf085abee194c4a2d06.png" alt="1"/> s instead
of the length of one screen. If shift key is held down with the
trackball, both left/right and up/down movements scroll the data
in time.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The trackball and mouse wheel functionality    is dependent on your X server settings. On Mac OSX these settings    are normally correct by default but on a LINUX system some adjustments    to the X server settings maybe necessary. Consult your system administrator    or Google for details.</p>
</div>
</div>
</div>
<div class="section" id="events-and-annotations">
<span id="babdfaha"></span><h2>Events and annotations<a class="headerlink" href="#events-and-annotations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="babjgedf">
<span id="id1"></span><h3>Overview<a class="headerlink" href="#babjgedf" title="Permalink to this headline">¶</a></h3>
<p>In mne_browse_raw and mne_process_raw <em>events</em> mark
interesting time points in the data. When a raw data file is opened,
a standard event file is consulted for the list of events. If this
file is not present, the digital trigger channel, defined by the &#8211;digtrig option
or the <tt class="docutils literal"><span class="pre">MNE_TRIGGER_CH_NAME</span></tt> environment variable is
scanned for events. For more information, see <a class="reference internal" href="#babbgjea"><em>Common options</em></a> and <a class="reference internal" href="#cacdchaj"><em>Open</em></a>.</p>
<p>In addition to the events detected on the trigger channel,
it is possible to associate user-defined events to the data, either
by marking data points interactively as described in <a class="reference internal" href="#babciggh"><em>Defining annotated events</em></a> or by loading event data from files, see <a class="reference internal" href="#babdgbhi"><em>Loading and saving event files</em></a>. Especially if there is a comment associated
with a user-defined event, we will sometimes call it an <em>annotation</em>.</p>
<p>If a data files has annotations (user-defined events) associated
with it in mne_browse_raw , information
about them is automatically saved to an annotation file when a data file is closed, <em>i.e.</em>,
when you quit mne_browse_raw or
load a new data file. This annotation file is called &lt;<em>raw data file name without fif extension</em>&gt; <tt class="docutils literal"><span class="pre">-annot.fif</span></tt> and
will be stored in the same directory as the raw data file. Therefore,
write permission to this directory is required to save the annotation
file.</p>
<p>Both the events defined by the trigger channel and the user-defined
events have three properties:</p>
<ul class="simple">
<li>The <em>time</em> when the
event occurred.</li>
<li>The <em>value</em> on the trigger channel just
before the change and now. For user-defined events the value before
is always zero and the current value is user defined and does not
necessarily reflect a change on the trigger channel. The trigger
channel events may also indicate changes between two non-zero values
and from a non-zero to zero. The event list described in <a class="reference internal" href="#babfdicc"><em>The event list</em></a> shows only transitions from zero to a non-zero
value. Similarly, the Jump to item
in the tool bar, described in <a class="reference internal" href="#cacdfgae"><em>The tool bar</em></a>, only detects
transitions from zero to a nonzero value.</li>
<li>An optional <em>comment</em> text, which is especially
helpful in associating user-defined events with real-world activity, <em>e.g.</em>,
the subject closing or opening his/her eyes or an epileptic patient
showing indications of a seizure.</li>
</ul>
</div>
<div class="section" id="the-event-list">
<span id="babfdicc"></span><h3>The event list<a class="headerlink" href="#the-event-list" title="Permalink to this headline">¶</a></h3>
<p>The Windows/Show event list... menu
choice shows a window containing a list of currently defined events.
The list can be restricted to user-defined events by checking User-defined events only . When an event is selected from the
list, the main display jumps to the corresponding time. If a user-defined
event is selected, it can be deleted with the Delete a user-defined event button.</p>
</div>
<div class="section" id="loading-and-saving-event-files">
<span id="babdgbhi"></span><h3>Loading and saving event files<a class="headerlink" href="#loading-and-saving-event-files" title="Permalink to this headline">¶</a></h3>
<p>Using the Load/Save events choices in the file menu, events
can be saved in text and fif formats, see <a class="reference internal" href="#cacbcegc"><em>Event files</em></a>,
below. The loading dialogs have the following options:</p>
<p><strong>Match comment with</strong></p>
<blockquote>
<div>Only those events which will contain comments and in which the comment
matches the entered text are loaded. This filtering option is useful, <em>e.g.</em>,
in loading averaging or covariance matrix computation log files,
see <a class="reference internal" href="#babihfbi"><em>Common parameters</em></a> and <a class="reference internal" href="#babcgeje"><em>Common parameters</em></a>.
If the word <em>omit</em> is entered as the filter,
only events corresponding to discarded epochs are loaded and the
reason for rejection can be investigated in detail.</div></blockquote>
<p><strong>Add as user events</strong></p>
<blockquote>
<div>Add the events as if they were user-defined events. As a result,
the annotation file saved next time mne_browse_raw closes
this raw file will contain these events.</div></blockquote>
<p><strong>Keep existing events</strong></p>
<blockquote>
<div>By default, the events loaded will replace the currently defined
ones. With this option checked, the loaded event will be merged
with the currently existing ones.</div></blockquote>
<p>The event saving dialogs have the
following options controlling the data saved:</p>
<p><strong>Save events read from the data file</strong></p>
<blockquote>
<div>Save only those event which are not designated as user defined. These
are typically the events corresponding to changes in the digital
trigger channel. Another possible source for these events is an event
file manually loaded <em>without</em> the Add as user events option.</div></blockquote>
<p><strong>Save events created here</strong></p>
<blockquote>
<div>Save the user-defined events.</div></blockquote>
<p><strong>Save all trigger line transitions</strong></p>
<blockquote>
<div>By default only those events which are associate with a transition from
zero to non-zero value are saved. These include the user-defined
events and leading edges of pulses on the trigger line. When this
option is present, all events included with the two above options are
saved, regardless the type of transition indicated (zero to non-zero,
non-zero to another non-zero value, and non-zero value to zero).</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have a text format event file whose content    you want to include as user-defined events and create the automatic    annotation file described in <a class="reference internal" href="#babjgedf"><em>Overview</em></a>, proceed as    follows:</p>
</div>
<ul class="simple">
<li>Load the event file with the option Add as user events set.</li>
<li>Open another data file or quit mne_browse_raw .</li>
<li>Optionally remove unnecessary events using the event list
dialog.</li>
</ul>
<p>The directory in which the raw data file resides now contains
an annotation file which will be automatically loaded each time
the data file is opened. A text format event file suitable for this
purpose can be created manually, extracted from an EDF+ file using
the <tt class="docutils literal"><span class="pre">--tal</span></tt> option in mne_edf2fiff discussed
in <a class="reference internal" href="convert.html#babhdbbd"><em>Importing EEG data saved in the EDF, EDF+, or BDF format</em></a>, or produced by custom software used during
data acquisition.</p>
</div>
<div class="section" id="defining-annotated-events">
<span id="babciggh"></span><h3>Defining annotated events<a class="headerlink" href="#defining-annotated-events" title="Permalink to this headline">¶</a></h3>
<p>The Windows/Show annotator... shows
a window to add annotated user-defined events. In this window, the
buttons in first column mark one or more selected time points with
the event number shown in the second column with an associated comment
specified in the third column. Marking also occurs when return is
pressed on any of the second and third column text fields.</p>
<p>When the dialog is brought up for the first time, the file
$HOME/.mne/mne_browse_raw.annot is consulted for the definitions
of the second and third column values, <em>i.e.</em>,
event numbers and comments. You can save the current definitions
with the Save defs button and
reload the annotation definition file with Load defs . The annotation definition file may contain comment
lines starting with &#8216;%&#8217; or &#8216;#&#8217; and
data lines which contain an event number and an optional comment,
separated from the event number by a colon.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to add a user-defined event without    an a comment, you can use the Picked to item    in the tool bar, described in <a class="reference internal" href="#cacdfgae"><em>The tool bar</em></a>.</p>
</div>
</div>
<div class="section" id="event-files">
<span id="cacbcegc"></span><h3>Event files<a class="headerlink" href="#event-files" title="Permalink to this headline">¶</a></h3>
<p>A text format event file contains information about transitions
on the digital trigger line in a raw data file. Any lines beginning
with the pound sign (<tt class="docutils literal"><span class="pre">#</span></tt> ) are considered as comments.
The format of the event file data is:</p>
<blockquote>
<div>&lt;<em>sample</em>&gt; &lt;<em>time</em>&gt; &lt;<em>from</em>&gt; &lt;<em>to</em>&gt; &lt;<em>text</em>&gt;</div></blockquote>
<p>where</p>
<p>** &lt;<em>sample</em>&gt;**</p>
<blockquote>
<div>is
the sample number. This sample number takes into account the initial
empty space in a raw data file as indicated by the FIFF_FIRST_SAMPLE
and/or FIFF_DATA_SKIP tags in the beginning of raw data. Therefore,
the event file contents are independent of the Keep initial skip setting in the open dialog.</div></blockquote>
<p>** &lt;<em>time</em>&gt;**</p>
<blockquote>
<div>is
the time from the beginning of the file to this sample in seconds.</div></blockquote>
<p>** &lt;<em>from</em>&gt;**</p>
<blockquote>
<div>is
the value of the digital trigger channel at &lt;<em>sample</em>&gt; -1.</div></blockquote>
<p>** &lt;<em>to</em>&gt;**</p>
<blockquote>
<div>is
the value of the digital trigger channel at &lt;<em>sample</em>&gt; .</div></blockquote>
<p>** &lt;<em>text</em>&gt;**</p>
<blockquote>
<div>is
an optional annotation associated with the event. This comment will
be displayed in the event list and on the message line when you
move to an event.</div></blockquote>
<p>When an event file is read back, the &lt;<em>sample</em>&gt; value
will be primarily used to specify the time. If you want the &lt;<em>time</em>&gt; to
be converted to the sample number instead, specify a negative value
for &lt;<em>sample</em>&gt; .</p>
<p>Each event file starts with a &#8220;pseudo event&#8221; where
both &lt;<em>from</em>&gt; and &lt;<em>to</em>&gt; fields
are equal to zero.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In previous versions of the MNE software,    the event files did not contain the initial empty pseudo event.    In addition the sample numbers did not take into account the initial    empty space in the raw data files. The present version of MNE software    is still backwards compatible with the old version of the event    files and interprets the sample numbers appropriately. However,    the recognition of the old and new event file formats depends on    the initial pseudo event and, therefore, this first event should never    be removed from the new event files. Likewise, if an initial pseudo event    with &lt;<em>from</em>&gt; and &lt;<em>to</em>&gt; fields    equal to zero is added to and old event file, the results will be    unpredictable.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have created Matlab, Excel or other scripts    to process the event files, they may need revision to include the    initial pseudo event in order for mne_browse_raw and mne_process_raw to    recognize the edited event files correctly.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Events can be also stored in fif format. This    format can be read and written with the Matlab toolbox functions mne_read_events and mne_write_events .</p>
</div>
</div>
</div>
<div class="section" id="the-tool-bar">
<span id="cacdfgae"></span><h2>The tool bar<a class="headerlink" href="#the-tool-bar" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="caccfegh" style="width: 100%">
<a class="reference internal image-reference" href="../_images/toolbar.png"><img alt="tool bar controls" src="../_images/toolbar.png" style="width: 100%;" /></a>
<p class="caption">The tool bar controls.</p>
</div>
<p>The tool bar controls are shown in <a class="reference internal" href="#caccfegh"><em>The tool bar controls.</em></a>.
They perform the following functions:</p>
<p><strong>start/s</strong></p>
<blockquote>
<div>Allows specification of the starting time of the display as a numeric value.
Note that this value will be rounded to the time of the nearest sample
when you press return. If you click on this text field, you can also
change the time with the up and down cursor keys (1/10 of the window
size), and the page up and down (or control up and down cursor)
keys (one window size).</div></blockquote>
<p><strong>Remove dc</strong></p>
<blockquote>
<div>Remove the dc offset from the signals for display. This does not affect
the data used for averaging and noise-covariance matrix estimation.</div></blockquote>
<p><strong>Keep dc</strong></p>
<blockquote>
<div>Return to the original true dc levels.</div></blockquote>
<p><strong>Jump to</strong></p>
<blockquote>
<div>Enter a value of a trigger to be searched for. The arrow buttons
jump to the next event of this kind. A selection is also automatically
created and displayed as requested in the scales dialog, see <a class="reference internal" href="#cacbehcd"><em>Scales</em></a>. If the &#8216;+&#8217; button is active,
previous selections are kept, otherwise they are cleared.</div></blockquote>
<p><strong>Picked to</strong></p>
<blockquote>
<div>Make user events with this event number at all picked time points.
It is also possible to add annotated user events with help of the
annotation dialog. For further information, see <a class="reference internal" href="#babdfaha"><em>Events and annotations</em></a>.</div></blockquote>
<p><strong>Forget</strong></p>
<blockquote>
<div>Forget desired user events.</div></blockquote>
<p><strong>Average</strong></p>
<blockquote>
<div>Compute an average to this event.</div></blockquote>
<p>The tool bar status line shows the starting time and the
length of the window in seconds as well as the cursor time point.
The dates and times in parenthesis show the corresponding wall-clock
times in the time zone where mne_browse_raw is
run.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The wall-clock times shown are based on the    information in the fif file and may be offset from the true acquisition    time by about 1 second. This offset is constant throughout the file.    The times reflect the time zone setting of the computer used to    analyze the data rather than the one use to acquire them.</p>
</div>
</div>
<div class="section" id="topographical-data-displays">
<span id="cacdadba"></span><h2>Topographical data displays<a class="headerlink" href="#topographical-data-displays" title="Permalink to this headline">¶</a></h2>
<p>Segments of data can shown in a topographical layout in the Full view window, which can be requested from the Scale dialog
or from the Windows menu. Another
similar display is available to show the averaged data. The topographical
layout to use is selected from Adjust/Full view layout... ,
which brings up a window with a list of available layouts. The default
layouts reside in <tt class="docutils literal"><span class="pre">$MNE_ROOT/share/mne/mne_analyze/lout</span></tt> .
In addition any layout files residing in <tt class="docutils literal"><span class="pre">$HOME/.mne/lout</span></tt> are listed.
The format of the layout files is the same as for the Neuromag programs xplotter and xfit .
A custom EEG layout can be easily created with the mne_make_eeg_layout utility,
see <a class="reference internal" href="utilities.html#chddgdja"><em>Creating a custom EEG layout</em></a>.</p>
<p>Several actions can be performed with the mouse in the topographical data
display:</p>
<p><strong>Left button</strong></p>
<blockquote>
<div>Shows the time and the channel name at the cursor at the bottom
of the window.</div></blockquote>
<p><strong>Left button drag with shift key</strong></p>
<blockquote>
<div>Enlarge the view to contain only channels in the selected area.</div></blockquote>
<p><strong>Right button</strong></p>
<blockquote>
<div>Brings up a popup menu which gives a choice of graphics output formats
for the current topographical display. Best quality is achieved
with the Illustrator format. This format has the benefit that it
is object oriented and can be edited in Adobe Illustrator.</div></blockquote>
<p><strong>Middle button</strong></p>
<blockquote>
<div>Drag and drop graphics to one of the cliplab view
areas.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The cliplab drag-and-drop    functionality requires that you have the proprietary Elekta-Neuromag    analysis software installed. mne_browse_raw is    compatible with cliplab versions    1.2.13 and later.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The graphics output files will contain a text    line stating of the time and vertical scales if the zero level/time    and/or viewport frames have been switched on in the scales dialog,    see <a class="reference internal" href="#cacbehcd"><em>Scales</em></a>.</p>
</div>
</div>
<div class="section" id="description-files-for-off-line-averaging">
<span id="cacbbdgc"></span><h2>Description files for off-line averaging<a class="headerlink" href="#description-files-for-off-line-averaging" title="Permalink to this headline">¶</a></h2>
<p>For averaging tasks more complex than those involving only
one trigger, the averaging parameters are specified with help of
a text file. This section describes the format of this file. A sample
averaging file can be found in <tt class="docutils literal"><span class="pre">$MNE_ROOT/share/mne/mne_browse_raw/templates</span></tt> .</p>
<div class="section" id="overall-format">
<h3>Overall format<a class="headerlink" href="#overall-format" title="Permalink to this headline">¶</a></h3>
<p>Any line beginning with the pound sign (#) in this description
file is a comment. Each parameter in the description file is defined
by a keyword usually followed by a value. Text values consisting
of multiple words, separated by spaces, must be included in quotation
marks. The case of the keywords in the file does not matter. The
ending <tt class="docutils literal"><span class="pre">.ave</span></tt> is suggested for the average description
files.</p>
<p>The general format of the description file is:</p>
<div class="highlight-python"><div class="highlight"><pre>average {
    &lt;common parameters&gt;
    category {
        &lt;category definition parameters&gt;
    }

    ...
}
</pre></div>
</div>
<p>The file may contain arbitrarily many categories. The word <tt class="docutils literal"><span class="pre">category</span></tt> interchangeable
with <tt class="docutils literal"><span class="pre">condition</span></tt> .</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Due to a bug that existed in some versions    of the Neuromag acquisition software, the trigger line 8 is incorrectly    decoded on trigger channel STI 014. This can be fixed by running mne_fix_stim14 on    the raw data file before using mne_browse_raw or mne_process_raw .    The bug has been fixed on Nov. 10, 2005.</p>
</div>
</div>
<div class="section" id="common-parameters">
<span id="babihfbi"></span><h3>Common parameters<a class="headerlink" href="#common-parameters" title="Permalink to this headline">¶</a></h3>
<p>The average definition starts with the common parameters.
They include:</p>
<p><strong>outfile &lt;*name*&gt;</strong></p>
<blockquote>
<div>The name of the file where the averages are to be stored. In interactive
mode, this can be omitted. The resulting average structure can be
viewed and stored from the Manage averages window.</div></blockquote>
<p><strong>eventfile &lt;*name*&gt;</strong></p>
<blockquote>
<div>Optional file to contain event specifications. If this file is present, the
trigger events in the raw data file are ignored and this file is
consulted instead. The event file format is recognized from the
file name: if it ends with <tt class="docutils literal"><span class="pre">.fif</span></tt> , the file is assumed
to be in fif format, otherwise a text file is expected. The text event
file format is described in <a class="reference internal" href="#cacbcegc"><em>Event files</em></a>.</div></blockquote>
<p><strong>logfile &lt;*name*&gt;</strong></p>
<blockquote>
<div>This optional file will contain detailed information about the averaging
process. In the interactive mode, the log information can be viewed
from the Manage averages window.</div></blockquote>
<p><strong>gradReject &lt;*value / T/m*&gt;</strong></p>
<blockquote>
<div>Rejection limit for MEG gradiometer channels. If the peak-to-peak amplitude
within the extracted epoch exceeds this value on any of the gradiometer
channels, the epoch will be omitted from the average.</div></blockquote>
<p><strong>magReject &lt;*value / T*&gt;</strong></p>
<blockquote>
<div>Rejection limit for MEG magnetometer and axial gradiometer channels.
If the peak-to-peak amplitude within the extracted epoch exceeds
this value on any of the magnetometer or axial gradiometer channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>eegReject &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Rejection limit for EEG channels. If the peak-to-peak amplitude within
the extracted epoch exceeds this value on any of the EEG channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>eogReject &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Rejection limit for EOG channels. If the peak-to-peak amplitude within
the extracted epoch exceeds this value on any of the EOG channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>ecgReject &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Rejection limit for ECG channels. If the peak-to-peak amplitude within
the extracted epoch exceeds this value on any of the ECG channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>gradFlat &lt;*value / T/m*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for MEG planar gradiometers. The peak-to-peak
value of all planar gradiometer signals must exceed this value,
for the epoch to be included. This criterion allows rejection of data
with saturated or otherwise dysfunctional channels. The default value
is zero, <em>i.e.</em>, no rejection.</div></blockquote>
<p><strong>magFlat &lt;*value / T*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for MEG magnetometers and axial gradiometers
channels.</div></blockquote>
<p><strong>eegFlat &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for EEG channels.</div></blockquote>
<p><strong>eogFlat &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for EOG channels.</div></blockquote>
<p><strong>ecgFlat &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for ECG channels.</div></blockquote>
<p><strong>stimIgnore &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Ignore this many seconds on both sides of the trigger when considering
the epoch. This parameter is useful for ignoring large stimulus artefacts, <em>e.g.</em>,
from electrical somatosensory stimulation.</div></blockquote>
<p><strong>fixSkew</strong></p>
<blockquote>
<div>Since the sampling of data and the stimulation devices are usually not
synchronized, all trigger input bits may not turn on at the same sample.
If this option is included in the off-line averaging description
file, the following procedure is used to counteract this: if there is
a transition from zero to a nonzero value on the digital trigger channel
at sample <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/>, the following sample
will be checked for a transition from this nonzero value to another
nonzero value. If such an event pair is found, the two events will
be jointly considered as a transition from zero to the second non-zero
value. With the fixSkew option, mne_browse_raw/mne_process_raw behaves
like the Elekta-Neuromag on-line averaging and Maxfilter (TM) software.</div></blockquote>
<p><strong>name &lt;*text*&gt;</strong></p>
<blockquote>
<div>A descriptive name for this set of averages. If the name contains multiple
words, enclose it in quotation marks &#8220;like this&#8221;.
The name will appear in the average manager window listing in the
interactive version of the program and as a comment in the processed
data section in the output file.</div></blockquote>
</div>
<div class="section" id="category-definition">
<span id="cachachh"></span><h3>Category definition<a class="headerlink" href="#category-definition" title="Permalink to this headline">¶</a></h3>
<p>A category (condition) is defined by the parameters listed
in this section.</p>
<p><strong>event &lt;*number*&gt;</strong></p>
<blockquote>
<div>The zero time point of an epoch to be averaged is defined by a transition
from zero to this number on the digital trigger channel. The interpretation
of the values on the trigger channel can be further modified by
the ignore and mask keywords. If multiple event parameters are present
for a category, all specified events will be included in the average.</div></blockquote>
<p><strong>ignore &lt;*number*&gt;</strong></p>
<blockquote>
<div>If this parameter is specified the selected bits on trigger channel
values can be mask (set to zero) out prior to checking for an existence of
an event. For example, to ignore the values of trigger input lines three
and eight, specify <tt class="docutils literal"><span class="pre">ignore</span> <span class="pre">132</span></tt> (<img class="math" src="../_images/math/131e44e201084d8ca9dd1fa384fea221422e3375.png" alt="2^2 + 2^7 = 132"/>).</div></blockquote>
<p><strong>mask &lt;*number*&gt;</strong></p>
<blockquote>
<div>Works similarly to ignore except that a mask specifies the trigger channel
bits to be included. For example, to look at trigger input lines
one to three only, ignoring others, specify <tt class="docutils literal"><span class="pre">mask</span> <span class="pre">7</span></tt>
(<img class="math" src="../_images/math/b8dc6c5c5d4df43339b3a2693b8685bc292df758.png" alt="2^0 + 2^1 + 2^2 = 7"/>).</div></blockquote>
<p><strong>prevevent &lt;*number*&gt;</strong></p>
<blockquote>
<div>Specifies the event that is required to occur immediately before
the event(s) specified with event parameter(s)
in order for averaging to occur. Only one previous event number
can be specified.</div></blockquote>
<p><strong>prevignore &lt;*number*&gt;</strong></p>
<blockquote>
<div>Works like ignore but for the
events specified with prevevent .
If prevignore and prevmask are
missing, the mask implied by ignore and mask is
applied to prevevent as well.</div></blockquote>
<p><strong>prevmask &lt;*number*&gt;</strong></p>
<blockquote>
<div>Works like mask but for the events
specified with prevevent . If prevignore and prevmask are
missing, the mask implied by ignore and mask is
applied to prevevent as well.</div></blockquote>
<p><strong>nextevent &lt;*number*&gt;</strong></p>
<blockquote>
<div>Specifies the event that is required to occur immediately after
the event(s) specified with event parameter(s)
in order for averaging to occur. Only one next event number can
be specified.</div></blockquote>
<p><strong>nextignore &lt;*number*&gt;</strong></p>
<blockquote>
<div>Works like ignore but for the
events specified with nextevent .
If nextgnore and nextmask are
missing, the mask implied by ignore and mask is
applied to nextevent as well.</div></blockquote>
<p><strong>nextmask &lt;*number*&gt;</strong></p>
<blockquote>
<div>Works like mask but for the events
specified with nextevent . If nextignore and nextmask are
missing, the mask implied by ignore and mask is
applied to nextevent as well.</div></blockquote>
<p><strong>delay &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Adds a delay to the time of the occurrence of an event. Therefore,
if this parameter is positive, the zero time point of the epoch
will be later than the time of the event and, correspondingly, if
the parameter is negative, the zero time point of the epoch will
be earlier than the event. By default, there will be no delay.</div></blockquote>
<p><strong>tmin &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Beginning time point of the epoch.</div></blockquote>
<p><strong>tmax &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>End time point of the epoch.</div></blockquote>
<p><strong>bmin &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Beginning time point of the baseline. If both <tt class="docutils literal"><span class="pre">bmin</span></tt> and <tt class="docutils literal"><span class="pre">bmax</span></tt> parameters
are present, the baseline defined by this time range is subtracted
from each epoch before they are added to the average.</div></blockquote>
<p><strong>basemin &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Synonym for bmin.</div></blockquote>
<p><strong>bmax &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>End time point of the baseline.</div></blockquote>
<p><strong>basemax &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Synonym for bmax.</div></blockquote>
<p><strong>name &lt;*text*&gt;</strong></p>
<blockquote>
<div>A descriptive name for this category. If the name contains multiple words,
enclose it in quotation marks &#8220;like this&#8221;. The
name will appear in the average manager window listing in the interactive
version of the program and as a comment averaging category section
in the output file.</div></blockquote>
<p><strong>abs</strong></p>
<blockquote>
<div>Calculate the absolute values of the data in the epoch before adding it to
the average.</div></blockquote>
<p><strong>stderr</strong></p>
<blockquote>
<div>The standard error of mean will be computed for this category and included
in the output fif file.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Specification of the baseline limits does not    any more imply the estimation of the standard error of mean. Instead,    the stderr parameter is required    to invoke this option.</p>
</div>
</div>
</div>
<div class="section" id="description-files-for-covariance-matrix-estimation">
<span id="cacebacg"></span><h2>Description files for covariance matrix estimation<a class="headerlink" href="#description-files-for-covariance-matrix-estimation" title="Permalink to this headline">¶</a></h2>
<p>Covariance matrix estimation is controlled by a another description
file, very similar to the average definition. A example of a covariance
description file can be found in the directory <tt class="docutils literal"><span class="pre">$MNE_ROOT/share/mne/mne_browse_raw/templates</span></tt> .</p>
<div class="section" id="id2">
<h3>Overall format<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Any line beginning with the pound sign (#) in this description
file is a comment. Each parameter in the description file is defined
by a keyword usually followed by a value. Text values consisting
of multiple words, separated by spaces, must be included in quotation
marks. The case of the keywords in the file does not matter. The
ending <tt class="docutils literal"><span class="pre">.cov</span></tt> is suggested for the covariance-matrix
description files.</p>
<p>The general format of the description file is:</p>
<div class="highlight-python"><div class="highlight"><pre>cov {
    &lt;*common parameters*&gt;
    def {
        &lt;*covariance definition parameters*&gt;
    }
    ...
}
</pre></div>
</div>
<p>The file may contain arbitrarily many covariance definitions,
starting with <tt class="docutils literal"><span class="pre">def</span></tt> .</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Due to a bug that existed in some versions    of the Neuromag acquisition software, the trigger line 8 is incorrectly    decoded on trigger channel STI 014. This can be fixed by running mne_fix_stim14 on    the raw data file before using mne_browse_raw or mne_process_raw .    This bug has been fixed in the acquisition software at the Martinos    Center on Nov. 10, 2005.</p>
</div>
</div>
<div class="section" id="babcgeje">
<span id="id3"></span><h3>Common parameters<a class="headerlink" href="#babcgeje" title="Permalink to this headline">¶</a></h3>
<p>The average definition starts with the common parameters.
They include:</p>
<p><strong>outfile &lt;*name*&gt;</strong></p>
<blockquote>
<div>The name of the file where the covariance matrix is to be stores. This
parameter is mandatory.</div></blockquote>
<p><strong>eventfile &lt;*name*&gt;</strong></p>
<blockquote>
<div>Optional file to contain event specifications. This file can be
either in fif or text format (see <a class="reference internal" href="#cacbcegc"><em>Event files</em></a>). The event
file format is recognized from the file name: if it ends with <tt class="docutils literal"><span class="pre">.fif</span></tt> ,
the file is assumed to be in fif format, otherwise a text file is
expected. If this parameter is present, the trigger events in the
raw data file are ignored and this event file is consulted instead.
The event file format is described in <a class="reference internal" href="#cacbcegc"><em>Event files</em></a>.</div></blockquote>
<p><strong>logfile &lt;*name*&gt;</strong></p>
<blockquote>
<div>This optional file will contain detailed information about the averaging
process. In the interactive mode, the log information can be viewed
from the Manage averages window.</div></blockquote>
<p><strong>gradReject &lt;*value / T/m*&gt;</strong></p>
<blockquote>
<div>Rejection limit for MEG gradiometer channels. If the peak-to-peak amplitude
within the extracted epoch exceeds this value on any of the gradiometer
channels, the epoch will be omitted from the average.</div></blockquote>
<p><strong>magReject &lt;*value / T*&gt;</strong></p>
<blockquote>
<div>Rejection limit for MEG magnetometer and axial gradiometer channels.
If the peak-to-peak amplitude within the extracted epoch exceeds
this value on any of the magnetometer or axial gradiometer channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>eegReject &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Rejection limit for EEG channels. If the peak-to-peak amplitude within
the extracted epoch exceeds this value on any of the EEG channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>eogReject &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Rejection limit for EOG channels. If the peak-to-peak amplitude within
the extracted epoch exceeds this value on any of the EOG channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>ecgReject &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Rejection limit for ECG channels. If the peak-to-peak amplitude within
the extracted epoch exceeds this value on any of the ECG channels,
the epoch will be omitted from the average.</div></blockquote>
<p><strong>gradFlat &lt;*value / T/m*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for MEG planar gradiometers. The peak-to-peak
value of all planar gradiometer signals must exceed this value,
for the epoch to be included. This criterion allows rejection of data
with saturated or otherwise dysfunctional channels. The default value
is zero, <em>i.e.</em>, no rejection.</div></blockquote>
<p><strong>magFlat &lt;*value / T*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for MEG magnetometers and axial gradiometers
channels.</div></blockquote>
<p><strong>eegFlat &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for EEG channels.</div></blockquote>
<p><strong>eogFlat &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for EOG channels.</div></blockquote>
<p><strong>ecgFlat &lt;*value / V*&gt;</strong></p>
<blockquote>
<div>Signal detection criterion for ECG channels.</div></blockquote>
<p><strong>stimIgnore &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Ignore this many seconds on both sides of the trigger when considering
the epoch. This parameter is useful for ignoring large stimulus artefacts, <em>e.g.</em>,
from electrical somatosensory stimulation.</div></blockquote>
<p><strong>fixSkew</strong></p>
<blockquote>
<div>Since the sampling of data and the stimulation devices are usually not
synchronized, all trigger input bits may not turn on at the same sample.
If this option is included in the off-line averaging description
file, the following procedure is used to counteract this: if there is
a transition from zero to a nonzero value on the digital trigger channel
at sample <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/>, the following sample
will be checked for a transition from this nonzero value to another
nonzero value. If such an event pair is found, the two events will
be jointly considered as a transition from zero to the second non-zero
value.</div></blockquote>
<p><strong>keepsamplemean</strong></p>
<blockquote>
<div>The means at individual samples will <em>not</em> be
subtracted in the estimation of the covariance matrix. For details,
see <a class="reference internal" href="#babhjdej"><em>Epochs</em></a>. This parameter is effective only for
estimating the covariance matrix from epochs. It is recommended
to specify this option. However, for compatibility with previous
MNE releases, keepsamplemean is
not on by default.</div></blockquote>
</div>
<div class="section" id="covariance-definitions">
<span id="babeciah"></span><h3>Covariance definitions<a class="headerlink" href="#covariance-definitions" title="Permalink to this headline">¶</a></h3>
<p>The covariance definitions starting with def specify the
epochs to be included in the estimation of the covariance matrix.</p>
<p><strong>event &lt;*number*&gt;</strong></p>
<blockquote>
<div>The zero time point of an epoch to be averaged is defined by a transition
from zero to this number on the digital trigger channel. The interpretation
of the values on the trigger channel can be further modified by
the ignore and mask keywords. If multiple event parameters are present
in a definition, all specified events will be included. If the event
parameter is missing or set to zero, the covariance matrix is computed
over a section of the raw data, defined by the <tt class="docutils literal"><span class="pre">tmin</span></tt> and <tt class="docutils literal"><span class="pre">tmax</span></tt> parameters.</div></blockquote>
<p><strong>ignore &lt;*number*&gt;</strong></p>
<blockquote>
<div>If this parameter is specified the selected bits on trigger channel
values can be mask (set to zero) out prior to checking for an existence of
an event. For example, to ignore the values of trigger input lines three
and eight, specify <tt class="docutils literal"><span class="pre">ignore</span> <span class="pre">132</span></tt> (<img class="math" src="../_images/math/131e44e201084d8ca9dd1fa384fea221422e3375.png" alt="2^2 + 2^7 = 132"/>).</div></blockquote>
<p><strong>mask &lt;*number*&gt;</strong></p>
<blockquote>
<div>Works similarly to ignore except that a mask specifies the trigger channel
bits to be included. For example, to look at trigger input lines
one to three only, ignoring others, specify <tt class="docutils literal"><span class="pre">mask</span> <span class="pre">7</span></tt>
(<img class="math" src="../_images/math/b8dc6c5c5d4df43339b3a2693b8685bc292df758.png" alt="2^0 + 2^1 + 2^2 = 7"/>).</div></blockquote>
<p><strong>delay &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Adds a delay to the time of the occurrence of an event. Therefore,
if this parameter is positive, the zero time point of the epoch
will be later than the time of the event and, correspondingly, if
the parameter is negative, the zero time point of the epoch will
be earlier than the time of the event. By default, there will be
no delay.</div></blockquote>
<p><strong>tmin &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Beginning time point of the epoch. If the <tt class="docutils literal"><span class="pre">event</span></tt> parameter
is zero or missing, this defines the beginning point of the raw
data range to be included.</div></blockquote>
<p><strong>tmax &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>End time point of the epoch. If the <tt class="docutils literal"><span class="pre">event</span></tt> parameter
is zero or missing, this defines the end point of the raw data range
to be included.</div></blockquote>
<p><strong>bmin &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>It is possible to remove a baseline from the epochs before they
are included in the covariance matrix estimation. This parameter
defines the starting point of the baseline. This feature can be
employed to avoid overestimation of noise in the presence of low-frequency drifts.
Setting of <tt class="docutils literal"><span class="pre">bmin</span></tt> and <tt class="docutils literal"><span class="pre">bmax</span></tt> is always recommended
for epoch-based covariance matrix estimation.</div></blockquote>
<p><strong>basemin &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Synonym for bmin.</div></blockquote>
<p><strong>bmax &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>End time point of the baseline, see above.</div></blockquote>
<p><strong>basemax &lt;*time / s*&gt;</strong></p>
<blockquote>
<div>Synonym for bmax.</div></blockquote>
</div>
</div>
<div class="section" id="managing-averages">
<span id="cacjfadf"></span><h2>Managing averages<a class="headerlink" href="#managing-averages" title="Permalink to this headline">¶</a></h2>
<p>This selection pops up a dialog which allows the management
of computed averages. The controls in the dialog, shown in <a class="reference internal" href="#cacefabd"><em>The dialog for managing available averages.</em></a>, allow the following:</p>
<ul class="simple">
<li>Select which categories (conditions)
are displayed in the average view.</li>
<li>Select the colors of the traces.</li>
<li>Viewing the log information accumulated in the averaging process.</li>
<li>Saving of averaged data.</li>
<li>Setting the active vectors for signal-space projection if
the data were loaded from a file.</li>
<li>Setting the current software gradient compensation for data
loaded from a file.</li>
</ul>
<div class="figure" id="cacefabd">
<img alt="dialog for managing available averages" src="../_images/manage_averages_dialog.png" />
<p class="caption">The dialog for managing available averages.</p>
</div>
<p>In the example of <a class="reference internal" href="#cacefabd"><em>The dialog for managing available averages.</em></a>, the first item
is an average computed within mne_browse_raw ,
the second one contains data loaded from a file with signal-space
projection data available, the third one demonstrates multiple data
sets loaded from a file with neither projection nor software gradient
compensation available, and the last one is a data set loaded from file
with software gradient compensation data present. Note that this
is now a scrolled window and some of the loaded data may be below
or above the current view area.</p>
</div>
<div class="section" id="the-signal-space-projection-ssp-method">
<span id="cacchabi"></span><h2>The Signal-Space Projection (SSP) method<a class="headerlink" href="#the-signal-space-projection-ssp-method" title="Permalink to this headline">¶</a></h2>
<p>The Signal-Space Projection (SSP) is one approach to rejection
of external disturbances in software. The section presents some
relevant details of this method.</p>
<div class="section" id="general-concepts">
<h3>General concepts<a class="headerlink" href="#general-concepts" title="Permalink to this headline">¶</a></h3>
<p>Unlike many other noise-cancellation approaches, SSP does
not require additional reference sensors to record the disturbance
fields. Instead, SSP relies on the fact that the magnetic field
distributions generated by the sources in the brain have spatial
distributions sufficiently different from those generated by external
noise sources. Furthermore, it is implicitly assumed that the linear
space spanned by the significant external noise patters has a low
dimension.</p>
<p>Without loss of generality we can always decompose any <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/>-channel
measurement <img class="math" src="../_images/math/af8adfb4af47d6d37f908b604cfe84f5ad012005.png" alt="b(t)"/> into its signal and
noise components as</p>
<div class="math">
<p><img src="../_images/math/0ed8e004e7708a4c9746db342f285907dae02d2a.png" alt="b(t) = b_s(t) + b_n(t)"/></p>
</div><p>Further, if we know that <img class="math" src="../_images/math/15d799689b62f37bc58aa0ac1e3444264cafce46.png" alt="b_n(t)"/> is
well characterized by a few field patterns <img class="math" src="../_images/math/598213167a5d2d6c15280dcbc2a77b5103079c5b.png" alt="b_1 \dotso b_m"/>,
we can express the disturbance as</p>
<div class="math">
<p><img src="../_images/math/97ac9529bc14c437df1f8a77d47f0bd55f9309a5.png" alt="b_n(t) = Uc_n(t) + e(t)\ ,"/></p>
</div><p>where the columns of <img class="math" src="../_images/math/73f5e249c88b2b3068263480f576b051cb5c4f6e.png" alt="U"/> constitute
an orthonormal basis for <img class="math" src="../_images/math/598213167a5d2d6c15280dcbc2a77b5103079c5b.png" alt="b_1 \dotso b_m"/>, <img class="math" src="../_images/math/b8299479e3fe383bf6107bdeb84b3cfe3db92803.png" alt="c_n(t)"/> is
an <img class="math" src="../_images/math/c4bb40dd65eae6c11b325989b14e0b8d35e4e3ef.png" alt="m"/>-component column vector, and
the error term <img class="math" src="../_images/math/99bf5cf9b4b463d6b35e1dbfa44df80274d8860b.png" alt="e(t)"/> is small and does
not exhibit any consistent spatial distributions over time, <em>i.e.</em>, <img class="math" src="../_images/math/9db6384c7c153d8f7b1fb8f30748e94e08a84007.png" alt="C_e = E \{e e^T\} = I"/>.
Subsequently, we will call the column space of <img class="math" src="../_images/math/73f5e249c88b2b3068263480f576b051cb5c4f6e.png" alt="U"/> the
noise subspace. The basic idea of SSP is that we can actually find
a small basis set <img class="math" src="../_images/math/598213167a5d2d6c15280dcbc2a77b5103079c5b.png" alt="b_1 \dotso b_m"/> such that the
conditions described above are satisfied. We can now construct the
orthogonal complement operator</p>
<div class="math">
<p><img src="../_images/math/129dca19f2c7fb781a1f65f42fe0a6c0477154e4.png" alt="P_{\perp} = I - UU^T"/></p>
</div><p>and apply it to <img class="math" src="../_images/math/af8adfb4af47d6d37f908b604cfe84f5ad012005.png" alt="b(t)"/> yielding</p>
<div class="math">
<p><img src="../_images/math/079a62e11d64d7cf98c60080ac5585a31011fba3.png" alt="b(t) = P_{\perp}b_s(t)\ ,"/></p>
</div><p>since <img class="math" src="../_images/math/6dd030e6f563724d7a6674985ca618f420a398eb.png" alt="P_{\perp}b_n(t) = P_{\perp}Uc_n(t) \approx 0"/>. The projection operator <img class="math" src="../_images/math/8954971beae7ff69d164b7df64464c8e56305269.png" alt="P_{\perp}"/> is
called the signal-space projection operator and generally provides
considerable rejection of noise, suppressing external disturbances
by a factor of 10 or more. The effectiveness of SSP depends on two
factors:</p>
<ul class="simple">
<li>The basis set <img class="math" src="../_images/math/598213167a5d2d6c15280dcbc2a77b5103079c5b.png" alt="b_1 \dotso b_m"/> should
be able to characterize the disturbance field patterns completely
and</li>
<li>The angles between the noise subspace space spanned by <img class="math" src="../_images/math/598213167a5d2d6c15280dcbc2a77b5103079c5b.png" alt="b_1 \dotso b_m"/> and the
signal vectors <img class="math" src="../_images/math/f9d6b92e8681ad1acc5e6d84d5a6e32ed4e70b2e.png" alt="b_s(t)"/> should be as close
to <img class="math" src="../_images/math/89d19344affbdf73c9f1c94ad812b3f179a000a5.png" alt="\pi / 2"/> as possible.</li>
</ul>
<p>If the first requirement is not satisfied, some noise will
leak through because <img class="math" src="../_images/math/9effd00c82b16f2dc019ea9af5436716d8854013.png" alt="P_{\perp}b_n(t) \neq 0"/>. If the any
of the brain signal vectors <img class="math" src="../_images/math/f9d6b92e8681ad1acc5e6d84d5a6e32ed4e70b2e.png" alt="b_s(t)"/> is
close to the noise subspace not only the noise but also the signal
will be attenuated by the application of <img class="math" src="../_images/math/8954971beae7ff69d164b7df64464c8e56305269.png" alt="P_{\perp}"/> and,
consequently, there might by little gain in signal-to-noise ratio. <a class="reference internal" href="#cacfgiec"><em>An example of the effect of SSP</em></a> demonstrates the effect of SSP on the Vectorview
magnetometer data. After the elimination of a three-dimensional
noise subspace, the absolute value of the noise is dampened approximately
by a factor of 10 and the covariance matrix becomes diagonally dominant.</p>
<p>Since the signal-space projection modifies the signal vectors
originating in the brain, it is necessary to apply the projection
to the forward solution in the course of inverse computations. This
is accomplished by mne_inverse_operator as
described in <a class="reference internal" href="mne.html#cbbddbgf"><em>Inverse-operator decomposition</em></a>. For more information on SSP,
please consult the references listed in <a class="reference internal" href="reading.html#cegieebb"><em>Signal-space projections</em></a>.</p>
<div class="figure" id="cacfgiec">
<img alt="example of the effect of SSP" src="../_images/proj-off-on.png" />
<p class="caption">An example of the effect of SSP</p>
<div class="legend">
The covariance matrix <img class="math" src="../_images/math/a10e79ed2d0ac18b3e693ea4817f63ca8d22e4d2.png" alt="C_n"/> of noise data on the 102 Vectorview magnetometers was computed (a) before and (b) after the application of SSP with three-dimensional noise subspace. The plotted quantity is <img class="math" src="../_images/math/8911b7b0aee4b3327f02b417a08d8f0701f2dc98.png" alt="\sqrt {|(C_n)_{jk}|}"/>. Note that the vertical scale in (b) is ten times smaller than in (a).</div>
</div>
</div>
<div class="section" id="estimation-of-the-noise-subspace">
<span id="babffchf"></span><h3>Estimation of the noise subspace<a class="headerlink" href="#estimation-of-the-noise-subspace" title="Permalink to this headline">¶</a></h3>
<p>As described above, application of SSP requires the estimation
of the signal vectors <img class="math" src="../_images/math/598213167a5d2d6c15280dcbc2a77b5103079c5b.png" alt="b_1 \dotso b_m"/> constituting
the noise subspace. The most common approach, also implemented in mne_browse_raw is
to compute a covariance matrix of empty room data, compute its eigenvalue
decomposition, and employ the eigenvectors corresponding to the
highest eigenvalues as basis for the noise subspace. It is also
customary to use a separate set of vectors for magnetometers and
gradiometers in the Vectorview system.</p>
</div>
<div class="section" id="eeg-average-electrode-reference">
<h3>EEG average electrode reference<a class="headerlink" href="#eeg-average-electrode-reference" title="Permalink to this headline">¶</a></h3>
<p>In the computation of EEG-based source estimates, the MNE
software employs the average-electrode reference, which means that
the average over all electrode signals <img class="math" src="../_images/math/f273e3f26851f50ec4f588b49ad8a87f2db9e585.png" alt="v_1 \dotso v_p"/> is
subtracted from each <img class="math" src="../_images/math/6ebe2d1850b52c8b852d0f4a930d800b28d9b37b.png" alt="v_j"/>:</p>
<div class="math">
<p><img src="../_images/math/6bc14618c8de14a9f981b460fc7a7e212c7845ea.png" alt="v_{j}' = v_j - \frac{1}{p} \sum_{k} v_k\ ."/></p>
</div><p>It is easy to see that the above equation actually corresponds
to the projection:</p>
<div class="math">
<p><img src="../_images/math/a27351d3d336c80229dbaa7ddd3c74f69c9df0f2.png" alt="v' = (I - uu^T)v\ ,"/></p>
</div><p>where</p>
<div class="math">
<p><img src="../_images/math/0d09a68fa309f2cc8c474cbbec8a06b57e47d93c.png" alt="u = \frac{1}{\sqrt{p}}[1\ ...\ 1]^T\ ."/></p>
</div></div>
</div>
<div class="section" id="covariance-matrix-estimation">
<span id="cachaaeg"></span><h2>Covariance matrix estimation<a class="headerlink" href="#covariance-matrix-estimation" title="Permalink to this headline">¶</a></h2>
<p>This section describes how the covariance matrices are computed
for raw data and epochs.</p>
<div class="section" id="continuous-raw-data">
<h3>Continuous raw data<a class="headerlink" href="#continuous-raw-data" title="Permalink to this headline">¶</a></h3>
<p>If a covariance matrix of a raw data is computed the data
are checked for artefacts in 200-sample pieces. Let us collect the
accepted <img class="math" src="../_images/math/2de38926392ba23abeac75effc66c37a5f5be5fd.png" alt="M"/> samples from all channels to
the vectors <img class="math" src="../_images/math/e952f2efdde34807f13ecaeb7d39dc98efc04c41.png" alt="s_j,\ j = 1, \dotsc ,M"/>. The estimate of the covariance
matrix is then computed as:</p>
<div class="math">
<p><img src="../_images/math/4e3d15930f00ca73516781300d8c4357fab4d25a.png" alt="\hat{C} = \frac{1}{M - 1} \sum_{j = 1}^M {(s_j - \bar{s})(s_j - \bar{s})}^T"/></p>
</div><p>where</p>
<div class="math">
<p><img src="../_images/math/b8076d6a3f90f17c44a4bc610d0d068d804ea559.png" alt="\bar{s} = \frac{1}{M} \sum_{j = 1}^M s_j"/></p>
</div><p>is the average of the signals over all times. Note that no
attempt is made to correct for low frequency drifts in the data.
If the contribution of any frequency band is not desired in the
covariance matrix estimate, suitable band-pass filter should be
applied.</p>
<p>For actual computations, it is convenient to rewrite the
expression for the covariance matrix as</p>
<div class="math">
<p><img src="../_images/math/40f631819aca9138aef8b00255a5f32369fb4333.png" alt="\hat{C} = \frac{1}{M - 1} \sum_{j = 1}^M {s_j s_j^T} - \frac{M}{M - 1} \bar{s} \bar{s}^T"/></p>
</div></div>
<div class="section" id="epochs">
<span id="babhjdej"></span><h3>Epochs<a class="headerlink" href="#epochs" title="Permalink to this headline">¶</a></h3>
<p>The calculation of the covariance matrix is slightly more
complicated in the epoch mode. If the bmin and bmax parameters
are specified in the covariance matrix description file (see <a class="reference internal" href="#babeciah"><em>Covariance definitions</em></a>), baseline correction is first applied to each
epoch.</p>
<p>Let the vectors</p>
<div class="math">
<p><img src="../_images/math/15f5e07f9f879b66496e74ab098ea4d4c07d6170.png" alt="s_{rpj}\ ;\ p = 1 \dotsc P_r\ ;\ j = 1 \dotsc N_r\ ;\ r = 1 \dotsc R"/></p>
</div><p>be the samples from all channels in the baseline corrected epochs
used to calculate the covariance matrix. In the above, <img class="math" src="../_images/math/28721b284f7ab1735f880deb74007450a5d80f8b.png" alt="P_r"/> is
the number of accepted epochs in category <img class="math" src="../_images/math/2ede365ad144ab396916ec60458da03860803078.png" alt="r"/>, <img class="math" src="../_images/math/af5c95433f7100f36f06e3acc781d41e800ef27d.png" alt="N_r"/> is
the number of samples in the epochs of category <img class="math" src="../_images/math/2ede365ad144ab396916ec60458da03860803078.png" alt="r"/>,
and <img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/> is the number of categories.</p>
<p>If the recommended <tt class="docutils literal"><span class="pre">--keepsamplemean</span></tt> option
is specified in the covariance matrix definition file, the baseline
correction is applied to the epochs but the means at individual
samples are not subtracted. Thus the covariance matrix will be computed
as:</p>
<div class="math">
<p><img src="../_images/math/1f0f926e4261a45234760af7ce8dd3a502d049ee.png" alt="\hat{C} = \frac{1}{N_C} \sum_{r,p,j} {s_{rpj} s_{rpj}^T}\ ,"/></p>
</div><p>where</p>
<div class="math">
<p><img src="../_images/math/1f714a0fc7d108cd47261398042bc2a2c305a21c.png" alt="N_C = \sum_{r = 1}^R N_r P_r\ ."/></p>
</div><p>If keepsamplemean is <em>not</em> specified,
we estimate the covariance matrix as</p>
<div class="math">
<p><img src="../_images/math/1fb6e5d43785d78ee2c5fdaaae9b27f5d1ac17ad.png" alt="\hat{C} = \frac{1}{N_C} \sum_{r = 1}^R \sum_{j = 1}^{N_r} \sum_{p = 1}^{P_r} {(s_{rpj} - \bar{s_{rj}}) ((s_{rpj} - \bar{s_{rj}})^T}\ ,"/></p>
</div><p>where</p>
<div class="math">
<p><img src="../_images/math/a10456f2c90fd0e43d88e0ec608bf8f015f16b0c.png" alt="\bar{s_{rj}} = \frac{1}{P_r} \sum_{p = 1}^{P_r} s_{rpj}"/></p>
</div><p>and</p>
<div class="math">
<p><img src="../_images/math/ee0787cb5bf801fd0c0e67dbc1ddb25c1a591262.png" alt="N_C = \sum_{r = 1}^R {N_r (P_r - 1)}\ ,"/></p>
</div><p>which reflects the fact that <img class="math" src="../_images/math/af5c95433f7100f36f06e3acc781d41e800ef27d.png" alt="N_r"/> means
are computed for category <img class="math" src="../_images/math/2ede365ad144ab396916ec60458da03860803078.png" alt="r"/>. It
is easy to see that the expression for the covariance matrix estimate
can be cast into a more convenient form</p>
<div class="math">
<p><img src="../_images/math/9872a4a898ffb21f36841965ae502928fc942e90.png" alt="\hat{C} = \frac{1}{N_C} \sum_{r,p,j} {s_{rpj} s_{rpj}^T} - \frac{1}{N_C} \sum_r P_r \sum_j {\bar{s_{rj}} \bar{s_rj}^T}/ ."/></p>
</div><p>Subtraction of the means at individual samples is useful
if it can be expected that the evoked response from previous stimulus
extends to part of baseline period of the next one.</p>
</div>
<div class="section" id="combination-of-covariance-matrix-estimates">
<h3>Combination of covariance matrix estimates<a class="headerlink" href="#combination-of-covariance-matrix-estimates" title="Permalink to this headline">¶</a></h3>
<p>Let us assume that we have computed multiple covariance matrix
estimates <img class="math" src="../_images/math/1958dd4778f4a487b0867f31d3898cff32219714.png" alt="\hat{C_1} \dotso \hat{C_Q}"/> with corresponding degrees
of freedom <img class="math" src="../_images/math/b8a65a1ae5af1c36db5c82c6fc6eed5b1e8261e3.png" alt="N_1 \dotso N_Q"/>. We can combine these
matrices together as</p>
<div class="math">
<p><img src="../_images/math/df060d246f60b0a9beedd55f26b1277f61a18340.png" alt="C = \sum_q {\alpha_q \hat{C}_q}\ ,"/></p>
</div><p>where</p>
<div class="math">
<p><img src="../_images/math/fa523341f78d276180fd228997269b6483d63800.png" alt="\alpha_q = \frac{N_q}{\sum_q {N_q}}\ ."/></p>
</div></div>
<div class="section" id="ssp-information-included-with-covariance-matrices">
<h3>SSP information included with covariance matrices<a class="headerlink" href="#ssp-information-included-with-covariance-matrices" title="Permalink to this headline">¶</a></h3>
<p>If a signal space projection was on when a covariance matrix
was calculated, information about the projections applied is included
with the covariance matrix when it is saved. These projection data
are read by mne_inverse_operator and
applied to the forward solution as well as appropriate. Inclusion
of the projections into the covariance matrix limits the possibilities
to use the <tt class="docutils literal"><span class="pre">--bad</span></tt> and <tt class="docutils literal"><span class="pre">--proj</span></tt> options in mne_inverse_operator ,
see <a class="reference internal" href="mne.html#cbbddbgf"><em>Inverse-operator decomposition</em></a>.</p>
</div>
</div>
<div class="section" id="interacting-with-mne-analyze">
<span id="cacghegc"></span><h2>Interacting with mne_analyze<a class="headerlink" href="#interacting-with-mne-analyze" title="Permalink to this headline">¶</a></h2>
<p>To facilitate interactive analysis of raw data, mne_browse_raw can
run  mne_analyze as a child process.
In this mode, mne_analyze is &#8220;remote controlled&#8221; by mne_browse_raw and
will also send replies to mne_browse_raw to
keep the two programs synchronized. A practical application of this
communication is to view field or potential maps and cortically-constrained
source estimates computed from raw data instantly.</p>
<p>The subordinate mne_analyze is
started and stopped from Start mne_analyze and Quit mne_analyze in the Windows menu,
respectively. The following settings are communicated between the
two processes:</p>
<p><strong>The raw data file</strong></p>
<blockquote>
<div>If a new raw data file is opened and a subordinate mne_analyze is active,
the name of the raw data file is communicated to mne_analyze and
a simplified version of the open dialog appears in mne_analyze allowing
selection of an inverse operator or are MEG/MRI coordinate transformation.
If a raw data file is already open in mne_browse_raw when mne_analyze is
started, the open dialog appears immediately.</div></blockquote>
<p><strong>Time point</strong></p>
<blockquote>
<div>When a new time point is selected in mne_browse_raw the mne_analyze time
point selection is updated accordingly. Time point selection in mne_analyze is
not transferred to mne_browse_raw .</div></blockquote>
<p><strong>Scales</strong></p>
<blockquote>
<div>The vertical scales are kept synchronized between the two programs.
In addition, the settings of the sample time limits are communicated
from mne_browse_raw to mne_analyze .</div></blockquote>
<p><strong>Filter</strong></p>
<blockquote>
<div>The filter settings are kept synchronized.</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2012-2015, MNE Developers.
      Last updated on May 14, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>